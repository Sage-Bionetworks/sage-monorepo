name: Update DB files
on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest

    steps:
      - name: Get current date
        run: |
          echo "TODAY=$(date +"%Y-%m-%d")" >> $env:GITHUB_ENV

      - name: Use variable
        run: |
          echo "${{ env.TODAY }}"

      # - name: Install system dependencies
      #   run: |
      #     sudo add-apt-repository ppa:deadsnakes/ppa
      #     sudo apt-get update
      #     sudo apt-get install -y pip python3.10-venv libcurl4-openssl-dev

      # - name: Install schematic and validate files
      #   shell: bash
      #   run: |
      #     python3.10 -m venv .venv
      #     chmod 755 .venv/bin/activate
      #     source .venv/bin/activate
      #     pip3.10 install schematicpy
  
      # - name: Commit files
      #   run: |
      #     git config user.name github-actions[bot]
      #     git config user.email 41898282+github-actions[bot]@users.noreply.github.com
      #     git commit -m "add latest CSV dump files for DB update" -a

      # - name: Push changes
      #   uses: ad-m/github-push-action@master
      #   with:
      #     github_token: ${{ secrets.GH_TOKEN }}
      #     branch: db-update-${{ env.TODAY }}
