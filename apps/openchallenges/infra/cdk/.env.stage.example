# Staging environment configuration
# This file is loaded when running commands with :stage configuration
# Example: nx synth openchallenges-infra-cdk:stage

# Optional: AWS Profile for authentication
# Stage and prod both use the production AWS account
# Specify the AWS profile name configured in ~/.aws/credentials
# If not provided, uses the default AWS profile or environment credentials
AWS_PROFILE=openchallenges-prod-Developer

# Required: Environment name
ENV=stage

# Required: VPC CIDR block for the stage environment
# Default: 10.1.0.0/16 (65,536 IP addresses)
# Use a non-overlapping CIDR with dev and prod environments
# Stage uses a different CIDR than dev (10.0.0.0/16) to allow VPC peering if needed
VPC_CIDR=10.255.93.0/24

# Optional: Number of Availability Zones
# Default: 2 (for high availability)
# Stage uses production-like configuration with Multi-AZ deployment
# Each AZ gets its own NAT gateway for fault tolerance
MAX_AZS=2

# Optional: Application version/Docker image tag
# Default: "latest" (stable release builds from CI/CD)
# Use specific version tags for predictable deployments (e.g., "1.3.8", "1.4.0")
# Stage should use published images from CI/CD, not local builds
# Example: APP_VERSION=1.4.0
APP_VERSION=edge

# Optional: Custom domain name for the application
# Default: Uses ALB DNS name (e.g., openchallenges-stage-alb-1234567890.us-east-1.elb.amazonaws.com)
# Provide your custom domain if you have one configured in Route53
# Note: Requires valid ACM certificate (see CERTIFICATE_ARN below)
# Example: FQDN=stage.openchallenges.io
FQDN=stage.openchallenges.io

# Optional: ACM Certificate ARN for HTTPS
# RECOMMENDED for stage environment to match production configuration
# Create an ACM certificate in AWS Certificate Manager for your domain
# and provide its ARN here to enable HTTPS
# Example: CERTIFICATE_ARN=arn:aws:acm:us-east-1:528757786185:certificate/abc12345-6789-def0-1234-567890abcdef
CERTIFICATE_ARN=arn:aws:acm:us-east-1:528757786185:certificate/7018402f-7774-4890-84d8-43b8748eba53

# Required: Google OAuth 2.0 Client ID for authentication
# Register your application at https://console.cloud.google.com/apis/credentials
# Navigate to: APIs & Services > Credentials > Create Credentials > OAuth 2.0 Client ID
# This is the public identifier for OpenChallenges in Google's OAuth provider
# Used to enable "Sign in with Google" functionality
# IMPORTANT: Use a separate OAuth client for stage (different from dev/prod)
# Configure authorized redirect URIs to include your stage domain
# Example: GOOGLE_CLIENT_ID=123456789-xyz789abc.apps.googleusercontent.com
GOOGLE_CLIENT_ID=

# Required: Google OAuth 2.0 Client Secret (CONFIDENTIAL)
# Obtain this from the same Google Cloud Console credentials page
# SECURITY: Stored in AWS Secrets Manager, never exposed in CloudFormation
# NEVER commit this value to version control or share publicly
# Used to authenticate OpenChallenges as a trusted OAuth client with Google
# Example: GOOGLE_CLIENT_SECRET=GOCSPX-xyz789abc123def456ghi
GOOGLE_CLIENT_SECRET=

# Required: Synapse OAuth 2.0 Client ID for authentication
# Register your application at https://www.synapse.org/
# Navigate to: Account Settings > OAuth Clients > Create New Client
# This is the public identifier for OpenChallenges in Synapse's OAuth provider
# Used to enable "Sign in with Synapse" functionality (Sage Bionetworks platform)
# IMPORTANT: Use a separate OAuth client for stage (different from dev/prod)
# Configure authorized redirect URIs to include your stage domain
# Example: SYNAPSE_CLIENT_ID=67890
SYNAPSE_CLIENT_ID=

# Required: Synapse OAuth 2.0 Client Secret (CONFIDENTIAL)
# Obtain this from the Synapse OAuth client registration page
# SECURITY: Stored in AWS Secrets Manager, never exposed in CloudFormation
# NEVER commit this value to version control or share publicly
# Used to authenticate OpenChallenges as a trusted OAuth client with Synapse
# Example: SYNAPSE_CLIENT_SECRET=xyz789abc123def456ghi789jkl
SYNAPSE_CLIENT_SECRET=

# Optional: OpenSearch domain administrator username
# Default: opensearch-admin
# This user has full administrative access to the OpenSearch domain
# The password is auto-generated and stored securely in AWS Secrets Manager
# Retrieve credentials: aws secretsmanager get-secret-value --secret-id openchallenges-stage-opensearch-credentials
OPENSEARCH_ADMIN_USERNAME=opensearch-admin

# Required: Date when OpenChallenges data was last updated
# Format: YYYY-MM-DD (ISO 8601 date format)
# This date is displayed in the web application footer to inform users
# Update this when refreshing stage data from production
# Example: DATA_UPDATED_ON=2025-10-19
DATA_UPDATED_ON=2026-01-18

# Optional: Enable placeholder mode for the image service
# Default: "false" (use real images from S3)
# When "true": Image service returns URLs to placeholder images (e.g., via placeholder.com)
#   No images need to exist in the S3 bucket - useful for initial deployment
# When "false": Image service returns URLs to real images stored in S3 via Thumbor
# Stage should use real images copied from production or a reference backup
# Set to "true" only during initial deployment before images are migrated
IMAGE_SERVICE_PLACEHOLDER_ENABLED=false