# Terraform backend configuration
terraform_backend:
  bucket_name: 'sage-bixarena-bootstrap-terraform-backend-use1-prod'
  bucket_region: 'us-east-1'
  dynamodb_table: 'sage-bixarena-bootstrap-terraform-backend-lock-use1-prod'
  role_arn: 'arn:aws:iam::xxx:role/AdministratorAccess'

# Module-specific configuration
modules:
  terraform_backend:
    aws_provider:
      # This module assumes that we are already logged in as the SSO Administrator role.
      # role_arn: 'arn:aws:iam::xxx:role/AdministratorAccess'
      region: 'us-east-1'

  github_oidc_provider:
    aws_provider:
      region: 'us-east-1'
    # GitHub repository (owner/repo) allowed to assume deploy roles via OIDC
    repository: 'Sage-Bionetworks/sage-monorepo'
    # List of GitHub OIDC sub suffixes (portion after `repo:owner/repo:`) allowed.
    # Common patterns:
    #   ref:refs/heads/main            (branch builds)
    #   pull_request                   (all PRs)
    #   environment:Production         (environments)
    allowed_subs:
      - 'ref:refs/heads/main'
    # Optionally list AWS managed or custom policy ARNs to attach to the deploy role skeleton.
    managed_policy_arns: []
    # Name override for the deploy role (omit to auto-generate from context/component)
    deploy_role_name: null
    create_deploy_role: true
