[tox]
envlist = py310
skipsdist = True

[testenv:py310]
allowlist_externals=poetry,sed
commands =
    pip install "cython<3.0.0"
    pip install --no-build-isolation pyyaml==5.4.1
    poetry install
    pytest --cov-report html:../../../coverage/apps/schematic/api --cov=schematic_api
    coverage lcov -o ../../../coverage/apps/schematic/api/lcov.info
    sed -i 's/SF:/SF:apps\/api\//g' ../../../coverage/apps/schematic/api/lcov.info
