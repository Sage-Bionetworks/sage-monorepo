# MkDocs Integration Guide

This document explains how the `docs/` directory is integrated with the MkDocs site.

## Auto-Discovery Setup

The MkDocs site uses the `awesome-pages` plugin to automatically discover and display documentation files.

### How It Works

1. **Plugin Configuration** ([mkdocs.yml](../mkdocs.yml)):

   ```yaml
   plugins:
     - awesome-pages # Enables auto-discovery
   ```

2. **Navigation Entry** ([mkdocs.yml](../mkdocs.yml)):

   ```yaml
   nav:
     - Technical Documentation:
         - Overview: docs/README.md
         - Architecture: docs/architecture/
         - Architecture Decision Records: docs/adr/
   ```

3. **Directory Control** (`.pages` files):
   Each directory contains a `.pages` file that controls how content is discovered and ordered.

## Directory Structure

```
docs/
├── .mkdocs-integration.md     # This file (not shown in site)
├── README.md                  # Overview page
├── rfcs/
│   ├── .pages                # Controls auto-discovery
│   ├── README.md             # RFC overview
│   └── *.md                  # Auto-discovered RFC documents
├── architecture/
│   ├── .pages                # Controls auto-discovery
│   ├── README.md             # Architecture overview
│   ├── *.md                  # Auto-discovered architecture docs
│   └── diagrams/
│       ├── .pages
│       └── *.gif, *.svg      # Auto-discovered diagrams
└── adr/
    ├── .pages                # Controls auto-discovery
    ├── README.md             # ADR overview
    └── *.md                  # Auto-discovered ADR documents
```

## Adding New Content

### Adding an RFC

1. Create your RFC: `docs/rfcs/NNNN-product-brief-title.md`
2. The RFC will automatically appear in the site navigation
3. Update `docs/rfcs/README.md` to list it in the Active RFCs table

### Adding an Architecture Document

1. Create your document: `docs/architecture/my-feature-plan.md`
2. That's it! The document will automatically appear in the site navigation
3. Update `docs/architecture/README.md` to reference it in the index

### Adding an ADR

1. Create your ADR: `docs/adr/0001-my-decision.md`
2. The ADR will automatically appear in the site navigation
3. Update `docs/adr/README.md` to list it in the Active ADRs table

### Adding a Diagram

1. Save your diagram: `docs/architecture/diagrams/my-diagram.svg`
2. Reference it from your architecture doc using relative path:
   ```markdown
   ![Architecture](./diagrams/my-diagram.svg)
   ```
3. Update `docs/architecture/README.md` to list it in the diagrams table

## RFCs (Included)

The `docs/rfcs/` directory is included in the MkDocs site for better visibility of active proposals. Once an RFC is approved, move it to `docs/architecture/` and update the status in both README files.

## Controlling Navigation Order

Edit the `.pages` file in each directory to control order:

```yaml
title: Architecture
nav:
  - README.md # Show first
  - specific-doc.md # Show second
  - ... # Auto-discover remaining files
  - diagrams # Subdirectory shown last
```

## Local Preview

To preview the MkDocs site locally:

```bash
# Install dependencies
uv sync --group dev

# Serve the site
mkdocs serve
```

Then visit http://127.0.0.1:8000

## Expected Build Warnings

When building or serving the site, you'll see these informational warnings from the awesome-pages plugin:

```
INFO - The following pages exist in the docs directory, but are not included in the "nav" configuration:
  - adr/README.md
  - architecture/README.md
  [etc.]
WARNING - A reference to 'architecture/' is included in the 'nav' configuration, which is not found
WARNING - A reference to 'adr/' is included in the 'nav' configuration, which is not found
```

**These warnings are expected and can be safely ignored.** The awesome-pages plugin auto-discovers these files and includes them in the site navigation even though they show in the warning. Verify by checking:

```bash
# Build the site
mkdocs build

# Verify pages were built
ls site/architecture/ site/adr/
```

You should see `index.html` files for all the documentation pages.

## References

- [MkDocs Documentation](https://www.mkdocs.org/)
- [Material Theme](https://squidfunk.github.io/mkdocs-material/)
- [Awesome Pages Plugin](https://github.com/lukasgeiter/mkdocs-awesome-pages-plugin)
