(self.webpackChunksage_monorepo=self.webpackChunksage_monorepo||[]).push([[9185],{"./libs/explorers/ui/src/lib/components/base-download-dom-image/base-download-dom-image.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".base-download-dom-image-action-button button.p-button-text {\n  color: var(--color-gray-1000);\n}\n.base-download-dom-image-action-button button.p-button-text:hover {\n  color: var(--color-action-primary);\n}\n\n.base-download-dom-image-panel {\n  margin-top: 5px;\n}\n.base-download-dom-image-panel .base-download-dom-image-option {\n  display: flex;\n}\n.base-download-dom-image-panel .p-popover-content {\n  width: 290px;\n  padding: 25px;\n  background-color: #fff;\n  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);\n}\n.base-download-dom-image-panel .base-download-dom-image-header {\n  margin-bottom: 15px;\n}\n.base-download-dom-image-panel .base-download-dom-image-body > div:not(:last-child) {\n  margin-bottom: 15px;\n}\n.base-download-dom-image-panel .base-download-dom-image-body .p-button {\n  width: 100%;\n}\n.base-download-dom-image-panel .base-download-dom-image-error {\n  padding-top: 6px;\n  font-size: 14px;\n  text-align: center;\n}\n\n.base-download-dom-image-spinner {\n  animation: base-download-dom-image-spin 2s linear infinite;\n}\n\n@keyframes base-download-dom-image-spin {\n  to {\n    rotate: 360deg;\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/explorers/ui/src/lib/components/base-download-dom-image/base-download-dom-image.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>BaseDownloadDomImageComponent});var asyncToGenerator=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.28.3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.4.1/node_modules/tslib/tslib.es6.js");var base_download_dom_image_componentngResource=__webpack_require__("./libs/explorers/ui/src/lib/components/base-download-dom-image/base-download-dom-image.component.scss?ngResource"),base_download_dom_image_componentngResource_default=__webpack_require__.n(base_download_dom_image_componentngResource),core=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/core.mjs"),resource=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/resource.mjs"),root_effect_scheduler=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),debug_node=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/debug_node.mjs"),fesm2022_forms=__webpack_require__("./node_modules/.pnpm/@angular+forms@20.3.1_@angular+common@20.3.1_@angular+core@20.3.1_@angular+compiler@20._f8e6b6920c06e0aa5c6f7a252596657f/node_modules/@angular/forms/fesm2022/forms.mjs"),angular_fontawesome=__webpack_require__("./node_modules/.pnpm/@fortawesome+angular-fontawesome@1.0.0_@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0_/node_modules/@fortawesome/angular-fontawesome/fesm2022/angular-fontawesome.mjs"),free_solid_svg_icons=__webpack_require__("./node_modules/.pnpm/@fortawesome+free-solid-svg-icons@6.7.1/node_modules/@fortawesome/free-solid-svg-icons/index.mjs"),primeng_button=__webpack_require__("./node_modules/.pnpm/primeng@19.0.9_18bfed6a870968de8d6d53a87eef0e78/node_modules/primeng/fesm2022/primeng-button.mjs"),primeng_popover=__webpack_require__("./node_modules/.pnpm/primeng@19.0.9_18bfed6a870968de8d6d53a87eef0e78/node_modules/primeng/fesm2022/primeng-popover.mjs"),primeng_radiobutton=__webpack_require__("./node_modules/.pnpm/primeng@19.0.9_18bfed6a870968de8d6d53a87eef0e78/node_modules/primeng/fesm2022/primeng-radiobutton.mjs");let BaseDownloadDomImageComponent=class BaseDownloadDomImageComponent{heading=(0,core.input)("Download this plot as:");modalButtonLabel=(0,core.input)("Download");buttonLabel=(0,core.input)("Download");filename=core.input.required();performDownload=core.input.required();hasCsvDownload=(0,core.input)(!1);hasImageDownload=(0,core.input)(!0);downloadIcon=free_solid_svg_icons.cbP;spinnerIcon=free_solid_svg_icons.z1G;types=(0,resource.EW)(()=>{const hasCsv=this.hasCsvDownload(),hasImage=this.hasImageDownload(),imageTypes=[{value:".png",label:hasCsv?"PNG image":"PNG"},{value:".jpeg",label:hasCsv?"JPEG image":"JPEG"}],csvType={value:".csv",label:"CSV data"};return hasImage&&hasCsv?[...imageTypes,csvType]:hasImage?imageTypes:hasCsv?[csvType]:[]});selectedType=(0,root_effect_scheduler.vPA)("");constructor(){(0,resource.QZ)(()=>{const types=this.types();types.length>0&&this.selectedType.set(types[0].value)})}error=(0,root_effect_scheduler.vPA)("");isLoading=(0,root_effect_scheduler.vPA)(!1);resizeTimer=0;popover={};download(){var _this=this;return(0,asyncToGenerator.A)(function*(){if(!_this.isLoading()){_this.error.set(""),_this.isLoading.set(!0);try{yield _this.waitForNextPaint(),yield _this.performDownload()(_this.selectedType()),_this.hide()}catch(err){_this.error.set("Oops, something went wrong!"),console.error(err)}finally{_this.isLoading.set(!1)}}})()}hide(){this.error.set(""),this.popover.hide()}onRotate(){this.hide()}onResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.hide()},0)}waitForNextPaint(){return new Promise(resolve=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>resolve())})})}static ctorParameters=()=>[];static propDecorators={heading:[{type:debug_node.pde,args:[{isSignal:!0,alias:"heading",required:!1,transform:void 0}]}],modalButtonLabel:[{type:debug_node.pde,args:[{isSignal:!0,alias:"modalButtonLabel",required:!1,transform:void 0}]}],buttonLabel:[{type:debug_node.pde,args:[{isSignal:!0,alias:"buttonLabel",required:!1,transform:void 0}]}],filename:[{type:debug_node.pde,args:[{isSignal:!0,alias:"filename",required:!0,transform:void 0}]}],performDownload:[{type:debug_node.pde,args:[{isSignal:!0,alias:"performDownload",required:!0,transform:void 0}]}],hasCsvDownload:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hasCsvDownload",required:!1,transform:void 0}]}],hasImageDownload:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hasImageDownload",required:!1,transform:void 0}]}],popover:[{type:core.ViewChild,args:["op",{static:!0}]}]}};BaseDownloadDomImageComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"explorers-base-download-dom-image",imports:[fesm2022_forms.YN,primeng_popover.k0,primeng_radiobutton.Ko,primeng_button.tm,angular_fontawesome.dX],template:'<p-button\n  class="base-download-dom-image-action-button"\n  type="button"\n  rounded="true"\n  size="small"\n  (click)="op.toggle($event)"\n  [variant]="buttonLabel() ? \'text\' : undefined"\n>\n  <fa-icon [icon]="downloadIcon"></fa-icon>\n  {{ buttonLabel() }}\n</p-button>\n<p-popover\n  #op\n  styleClass="base-download-dom-image-panel"\n  (rotate)="onRotate()"\n  (window:resize)="onResize()"\n>\n  <div class="base-download-dom-image-header">\n    {{ heading() }}\n  </div>\n  <div class="base-download-dom-image-body">\n    @for (type of types(); track type) {\n      <div class="base-download-dom-image-option">\n        <p-radiobutton\n          value="{{ type.value }}"\n          inputId="download-radio-{{ type.label }}"\n          [(ngModel)]="selectedType"\n        ></p-radiobutton>\n        <label for="download-radio-{{ type.label }}">{{ type.label }}</label>\n      </div>\n    }\n    <div>\n      <p-button [label]="modalButtonLabel()" rounded="true" size="small" (click)="download()">\n        @if (isLoading()) {\n          <fa-icon class="base-download-dom-image-spinner" [icon]="spinnerIcon"></fa-icon>\n        }\n      </p-button>\n      @if (error()) {\n        <div class="base-download-dom-image-error">{{ error() }}</div>\n      }\n    </div>\n  </div>\n</p-popover>\n',encapsulation:debug_node.gXe.None,styles:[base_download_dom_image_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],BaseDownloadDomImageComponent)},"./libs/explorers/ui/src/lib/components/download-dom-image/download-dom-image.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/explorers/ui/src/lib/components/download-dom-image/download-dom-image.component.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CsvData:()=>CsvData,IconActionButton:()=>IconActionButton,TextActionButton:()=>TextActionButton,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/.pnpm/tslib@2.4.1/node_modules/tslib/tslib.es6.js"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/core.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/debug_node.mjs"),_download_dom_image_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./libs/explorers/ui/src/lib/components/download-dom-image/download-dom-image.component.ts");let StorybookDownloadDomImageWrapper=class StorybookDownloadDomImageWrapper{plotRef;filename="my-plot";heading="Download this plot as:";buttonLabel="";hasCsvDownload=!1;data=[["Column 1","Column 2"],["Data 1","Data 2"]];getTarget=()=>this.plotRef.nativeElement;static propDecorators={plotRef:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.ViewChild,args:["plot",{static:!0}]}]}};StorybookDownloadDomImageWrapper=(0,tslib__WEBPACK_IMPORTED_MODULE_0__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.uAl)({selector:"explorers-download-dom-image-wrapper",template:'\n    <div>\n      <explorers-download-dom-image\n        [target]="plot"\n        [filename]="filename"\n        [heading]="heading"\n        [buttonLabel]="buttonLabel"\n        [hasCsvDownload]="hasCsvDownload"\n        [data]="data"\n      />\n      <div\n        #plot\n        style="width:300px;height:200px;background:#e0e0e0;display:flex;align-items:center;justify-content:center;"\n      >\n        <span>Plot Area</span>\n      </div>\n    </div>\n  ',standalone:!0,imports:[_download_dom_image_component__WEBPACK_IMPORTED_MODULE_3__.v]})],StorybookDownloadDomImageWrapper);const __WEBPACK_DEFAULT_EXPORT__={title:"UI/DownloadDomImageComponent",component:StorybookDownloadDomImageWrapper,args:{filename:"plot",heading:"Download this plot as:"},argTypes:{data:{control:!1}}},IconActionButton={args:{buttonLabel:""}},TextActionButton={args:{buttonLabel:"Download"}},CsvData={args:{buttonLabel:"Download",hasCsvDownload:!0,data:[["X","Y"],["1","2"],["3","4"]]}},__namedExportsOrder=["IconActionButton","TextActionButton","CsvData"];IconActionButton.parameters={...IconActionButton.parameters,docs:{...IconActionButton.parameters?.docs,source:{originalSource:"{\n  args: {\n    buttonLabel: ''\n  }\n}",...IconActionButton.parameters?.docs?.source}}},TextActionButton.parameters={...TextActionButton.parameters,docs:{...TextActionButton.parameters?.docs,source:{originalSource:"{\n  args: {\n    buttonLabel: 'Download'\n  }\n}",...TextActionButton.parameters?.docs?.source}}},CsvData.parameters={...CsvData.parameters,docs:{...CsvData.parameters?.docs,source:{originalSource:"{\n  args: {\n    buttonLabel: 'Download',\n    hasCsvDownload: true,\n    data: [['X', 'Y'], ['1', '2'], ['3', '4']]\n  }\n}",...CsvData.parameters?.docs?.source}}}},"./libs/explorers/ui/src/lib/components/download-dom-image/download-dom-image.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>DownloadDomImageComponent});var asyncToGenerator=__webpack_require__("./node_modules/.pnpm/@babel+runtime@7.28.3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.4.1/node_modules/tslib/tslib.es6.js");var download_dom_image_componentngResource=__webpack_require__("./libs/explorers/ui/src/lib/components/download-dom-image/download-dom-image.component.scss?ngResource"),download_dom_image_componentngResource_default=__webpack_require__.n(download_dom_image_componentngResource),core=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/core.mjs"),debug_node=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/debug_node.mjs"),dom_to_image_more_min=__webpack_require__("./node_modules/.pnpm/dom-to-image-more@3.5.0/node_modules/dom-to-image-more/dist/dom-to-image-more.min.js"),dom_to_image_more_min_default=__webpack_require__.n(dom_to_image_more_min),FileSaver_min=__webpack_require__("./node_modules/.pnpm/file-saver@2.0.5/node_modules/file-saver/dist/FileSaver.min.js"),base_download_dom_image_component=__webpack_require__("./libs/explorers/ui/src/lib/components/base-download-dom-image/base-download-dom-image.component.ts");let DownloadDomImageComponent=class DownloadDomImageComponent{target=core.input.required();heading=(0,core.input)("Download this plot as:");filename=core.input.required();buttonLabel=(0,core.input)("");hasCsvDownload=(0,core.input)(!1);hasImageDownload=(0,core.input)(!0);data=(0,core.input)([]);downloadImagePaddingPx=(0,core.input)();performDownload=(()=>{var _ref,_this=this;return _ref=(0,asyncToGenerator.A)(function*(fileType){".jpeg"!==fileType&&".png"!==fileType||(yield _this.downloadImage(fileType)),".csv"===fileType&&(yield _this.downloadCsvData(fileType))}),function(_x){return _ref.apply(this,arguments)}})();downloadImage=(()=>{var _ref2,_this2=this;return _ref2=(0,asyncToGenerator.A)(function*(fileType){const paddingPx=_this2.downloadImagePaddingPx()??0,blob=yield dom_to_image_more_min_default().toBlob(_this2.target(),{bgcolor:"#fff",width:_this2.target().offsetWidth+2*paddingPx,height:_this2.target().offsetHeight+2*paddingPx,...void 0!==_this2.downloadImagePaddingPx()&&{style:{padding:`${paddingPx}px`}}});(0,FileSaver_min.saveAs)(blob,_this2.filename()+fileType)}),function(_x2){return _ref2.apply(this,arguments)}})();downloadCsvData=(()=>{var _ref3,_this3=this;return _ref3=(0,asyncToGenerator.A)(function*(fileType){const csvType="text/csv;charset=utf-8;",data=_this3.data();if(!data||0===data.length){const emptyBlob=new Blob([],{type:csvType});return void(0,FileSaver_min.saveAs)(emptyBlob,_this3.filename()+fileType)}let csv="";for(const row of data)csv+=_this3.arrayToCSVString(row);const blob=new Blob([csv],{type:csvType});(0,FileSaver_min.saveAs)(blob,_this3.filename()+fileType)}),function(_x3){return _ref3.apply(this,arguments)}})();arrayToCSVString(values){return values.map(value=>`"${value.replaceAll('"','""')}"`).join(",")+"\n"}static propDecorators={target:[{type:debug_node.pde,args:[{isSignal:!0,alias:"target",required:!0,transform:void 0}]}],heading:[{type:debug_node.pde,args:[{isSignal:!0,alias:"heading",required:!1,transform:void 0}]}],filename:[{type:debug_node.pde,args:[{isSignal:!0,alias:"filename",required:!0,transform:void 0}]}],buttonLabel:[{type:debug_node.pde,args:[{isSignal:!0,alias:"buttonLabel",required:!1,transform:void 0}]}],hasCsvDownload:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hasCsvDownload",required:!1,transform:void 0}]}],hasImageDownload:[{type:debug_node.pde,args:[{isSignal:!0,alias:"hasImageDownload",required:!1,transform:void 0}]}],data:[{type:debug_node.pde,args:[{isSignal:!0,alias:"data",required:!1,transform:void 0}]}],downloadImagePaddingPx:[{type:debug_node.pde,args:[{isSignal:!0,alias:"downloadImagePaddingPx",required:!1,transform:void 0}]}]}};DownloadDomImageComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"explorers-download-dom-image",imports:[base_download_dom_image_component.m],template:'<explorers-base-download-dom-image\n  [filename]="filename()"\n  [heading]="heading()"\n  [performDownload]="performDownload"\n  [buttonLabel]="buttonLabel()"\n  [hasCsvDownload]="hasCsvDownload()"\n  [hasImageDownload]="hasImageDownload()"\n/>\n',styles:[download_dom_image_componentngResource_default()]})],DownloadDomImageComponent)},"./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map(function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content}).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}}}]);