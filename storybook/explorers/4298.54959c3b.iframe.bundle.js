"use strict";(self.webpackChunksage_monorepo=self.webpackChunksage_monorepo||[]).push([[4298],{"./libs/explorers/charts/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{PC:()=>BoxplotChart,YJ:()=>LegendChart,TM:()=>dynamicBoxplotPoints,r1:()=>mockPointStyles,qe:()=>staticBoxplotPoints,Bu:()=>staticBoxplotSummaries});const minimalBaseChartTheme={pointSymbolSize:18},grayGridBaseChartTheme={pointSymbolSize:9},minimalBoxplotChartTheme={...minimalBaseChartTheme,boxplotItemStyle:{borderColor:"#bcc0ca",borderWidth:2,color:"transparent"},titleTextStyle:{fontWeight:700,fontSize:"18px",color:"black"},xAxisLabelTextStyle:{color:"black",fontWeight:"bold",fontSize:"14px"},yAxisTitleTextStyle:{fontWeight:700,fontSize:"18px",color:"black"},yAxisSplitLine:{show:!1},yAxisTickLabelMaxWidth:80,tooltip:{confine:!0,position:"top",backgroundColor:"#63676C",borderColor:"transparent",textStyle:{color:"white"},extraCssText:"opacity: 0.9; width: auto; max-width: 300px; white-space: pre-wrap; text-align: center;"},grid:{left:98,right:20,containLabel:!1}},grayGridBoxplotChartTheme={...minimalBoxplotChartTheme,...grayGridBaseChartTheme,getBoxplotMarkArea:xAxisCategories=>({itemStyle:{color:"#AEB5BC1A"},data:xAxisCategories.map((_,idx)=>{const pcIndex=idx+1;return[{xAxis:pcIndex-.4},{xAxis:pcIndex+.4}]})}),xAxisLabelTextStyle:{...minimalBoxplotChartTheme.xAxisLabelTextStyle,fontWeight:"normal"},yAxisTitleTextStyle:{...minimalBoxplotChartTheme.yAxisTitleTextStyle,fontWeight:400,fontSize:"14px"},yAxisSplitLine:{show:!0},tooltip:{...minimalBoxplotChartTheme.tooltip,backgroundColor:"white",borderRadius:0,textStyle:{color:"#22252A"}},grid:{...minimalBoxplotChartTheme.grid,left:minimalBoxplotChartTheme.grid.left-3}},getPointStyleFromArray=(pointCategory,pointCategories,styleValues,styleType,notFoundValue)=>{const pointIndex=pointCategories.indexOf(pointCategory||"");return pointIndex<0?(console.warn(`Point category ${pointCategory} not found.`),notFoundValue):pointIndex>=styleValues.length?(console.warn(`More point category values provided than possible ${styleType}s. Will re-use an existing ${styleType}.`),styleValues[pointIndex%styleValues.length]):styleValues[pointIndex]},getCategoryPointShape=(pointCategory,pointCategories,shapes=["circle","triangle","rect","roundRect","diamond","pin","arrow"])=>getPointStyleFromArray(pointCategory,pointCategories,shapes,"shape","none"),getCategoryPointColor=(pointCategory,pointCategories,colors=["#000000","#E69F00","#56B4E9","#009E73","#F0E442","#0072B2","#D55E00","#CC79A7"])=>getPointStyleFromArray(pointCategory,pointCategories,colors,"color","transparent"),getCategoryPointStyle=(pointCategory,hasPointCategories,customMapping,defaultStyleFunction,pointCategories,defaultValue)=>{if(!hasPointCategories)return defaultValue;if(customMapping){return pointCategory&&customMapping[pointCategory]||defaultValue}return defaultStyleFunction(pointCategory,pointCategories)};function getUniqueValues(values,key,sortValues=!1){const outputVals=[];return values.forEach(val=>{const value=val[key];value&&-1===outputVals.indexOf(value)&&outputVals.push(value)}),sortValues&&outputVals.sort(),outputVals}function getOffsetAndJitteredXValue(xValue,pointIndex,nPoints,offset=.2,jitterMax=0){if(1===nPoints)return xValue;const totalDistance=Math.min(offset*(nPoints-1),.9);return xValue-totalDistance/2+pointIndex*totalDistance/(nPoints-1)+function getRandomNumber(min,max){const range=max-min;return Math.random()*range+min}(-1*jitterMax,jitterMax)}function getXAxisValueOfXAxisCategory(xAxisCategories,xAxisCategory){return xAxisCategories.indexOf(xAxisCategory)+1}var echarts=__webpack_require__("./node_modules/.pnpm/echarts@5.6.0/node_modules/echarts/index.js");function initChart(chartDom,initialHeight="350px"){!function ensureChartDomHasHeight(chartDom,initialHeight="350px"){const computedHeight=window.getComputedStyle(chartDom,null).getPropertyValue("height"),inlineHeight=chartDom.style.height;computedHeight&&"0px"!==computedHeight&&inlineHeight&&"0px"!==inlineHeight||(chartDom.style.height=initialHeight)}(chartDom,initialHeight);const chart=echarts.Ts(chartDom);return function resizeChartOnWindowResize(chartDom,chart){const resizeObserver=new ResizeObserver(()=>{chart.resize()});resizeObserver.observe(chartDom)}(chartDom,chart),chart}class BoxplotChart{chart;constructor(chartDom,boxplotProps){this.chart=initChart(chartDom),this.setOptions(boxplotProps)}destroy(){this.chart?.dispose()}getTitleOptions(boxplotChartTheme,xAxisTitle,title){const titles=[];return xAxisTitle&&titles.push({text:xAxisTitle,textStyle:boxplotChartTheme.titleTextStyle,left:"center",top:"bottom"}),title&&titles.push({text:title,left:"center",top:"top",textStyle:boxplotChartTheme.titleTextStyle}),titles}getXAxisOptions(xAxisCategories,xAxisLabelFormatter,xAxisLabelTooltipFormatter,boxplotChartTheme){return[{id:"value-x-axis",type:"value",axisLine:{onZero:!1},min:.5,max:function(value){return Math.round(2*(value.max+.5))/2},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{showMinLabel:!1,showMaxLabel:!1,show:!1}},{id:"category-x-axis",type:"category",data:xAxisCategories,axisLabel:{...boxplotChartTheme.xAxisLabelTextStyle,interval:0,formatter:value=>xAxisLabelFormatter?xAxisLabelFormatter(value):value},axisTick:{alignWithLabel:!0},axisLine:{onZero:!1},tooltip:{...xAxisLabelTooltipFormatter&&{formatter:params=>xAxisLabelTooltipFormatter(params),extraCssText:"border: unset; opacity: 0.9; background-color: #63676c"},show:Boolean(xAxisLabelTooltipFormatter)},triggerEvent:Boolean(xAxisLabelTooltipFormatter),position:"bottom"}]}getYAxisOptions(yAxisTitle,yAxisMin,yAxisMax,boxplotChartTheme){return{type:"value",name:yAxisTitle,nameLocation:"middle",nameGap:boxplotChartTheme.yAxisTickLabelMaxWidth,nameTextStyle:boxplotChartTheme.yAxisTitleTextStyle,axisLine:{show:!0},axisLabel:{width:boxplotChartTheme.yAxisTickLabelMaxWidth,hideOverlap:!0,showMinLabel:null==yAxisMin,showMaxLabel:null==yAxisMax},splitLine:boxplotChartTheme.yAxisSplitLine,min:yAxisMin?yAxisMin-.2:void 0,max:yAxisMax?yAxisMax+.2:void 0}}setOptions(boxplotProps){if(!this.chart)return;const{points,summaries,title,xAxisTitle,xAxisLabelFormatter,yAxisTitle,yAxisMin,yAxisMax,xAxisLabelTooltipFormatter,pointTooltipFormatter,pointCategoryColors,pointCategoryShapes,pointOpacity,chartStyle}=boxplotProps,showLegend=boxplotProps.showLegend||!1,noDataStyle=boxplotProps.noDataStyle||"textOnly",boxplotChartTheme="grayGrid"===chartStyle?grayGridBoxplotChartTheme:minimalBoxplotChartTheme,noPoints=0===points.length,noSummaries=null==summaries||0===summaries.length;if(noPoints&&noSummaries)return void function setNoDataOption(chart,noDataStyle){const noDataStyleOptions={textOnly:{text:"No data is currently available.",textColor:"rgb(174, 181, 188)",backgroundColor:"transparent"},grayBackground:{text:"Data unavailable",textColor:"#4A5056",backgroundColor:"#AEB5BC1A"}},noDataOptions={backgroundColor:noDataStyleOptions[noDataStyle].backgroundColor,title:{text:noDataStyleOptions[noDataStyle].text,left:"center",top:"middle",textStyle:{color:noDataStyleOptions[noDataStyle].textColor,fontStyle:"italic",fontWeight:400,fontSize:18}},aria:{enabled:!0,label:{description:noDataStyleOptions[noDataStyle].text}}};chart.setOption(noDataOptions,!0)}(this.chart,noDataStyle);const xAxisCategories=boxplotProps.xAxisCategories??getUniqueValues(noPoints&&summaries?summaries:points,"xAxisCategory"),pointCategories=getUniqueValues(points,"pointCategory"),hasPointCategories=pointCategories.length>0,dataForScatterPoints=function addXAxisValueToCategoryPoint(points,xAxisCategories,pointCategories,offset=.2,jitterMax=0){return points.map(pt=>{let xAxisValue=getXAxisValueOfXAxisCategory(xAxisCategories,pt.xAxisCategory);return pointCategories.length>0&&pt.pointCategory&&(xAxisValue=getOffsetAndJitteredXValue(xAxisValue,pointCategories.indexOf(pt.pointCategory),pointCategories.length,offset,jitterMax)),{...pt,xAxisValue}})}(points,xAxisCategories,pointCategories,.3,.02),dataForStaticBoxplotSummaries=summaries?function addXAxisValueToBoxplotSummaries(summaries,xAxisCategories){return summaries.map(summary=>{const xAxisValue=getXAxisValueOfXAxisCategory(xAxisCategories,summary.xAxisCategory);return{...summary,xAxisValue}})}(summaries,xAxisCategories):void 0,dataForDynamicBoxplotTransforms=function formatCategoryPointsForBoxplotTransform(points,xAxisCategories){const dataForBoxplotTransform=[];for(let i=0;i<=xAxisCategories.length;i++)dataForBoxplotTransform.push([]);return points.forEach(pt=>{const xAxisCategoryValue=getXAxisValueOfXAxisCategory(xAxisCategories,pt.xAxisCategory);dataForBoxplotTransform[xAxisCategoryValue].push(pt.value)}),dataForBoxplotTransform}(dataForScatterPoints,xAxisCategories),datasetOpts=[{id:"static-boxplot-summaries",dimensions:dataForStaticBoxplotSummaries?Object.keys(dataForStaticBoxplotSummaries[0]):void 0,source:dataForStaticBoxplotSummaries},{id:"points",dimensions:noPoints?void 0:Object.keys(dataForScatterPoints[0]),source:dataForScatterPoints},{id:"points-formatted-for-boxplot-transform",source:dataForDynamicBoxplotTransforms},{id:"dynamic-boxplot-summaries",fromDatasetId:"points-formatted-for-boxplot-transform",transform:{type:"boxplot"}}],pointDatasetIds=hasPointCategories?pointCategories:["points"];hasPointCategories&&pointCategories.forEach(pointCategory=>{datasetOpts.push({id:pointCategory,fromDatasetId:"points",transform:{type:"filter",config:{dimension:"pointCategory",value:pointCategory}}})});const seriesOpts=[],boxplotSeriesBase={type:"boxplot",z:1,itemStyle:boxplotChartTheme.boxplotItemStyle,boxWidth:[7,115],silent:!0,tooltip:{show:!1},markArea:boxplotChartTheme.getBoxplotMarkArea?.(xAxisCategories)};summaries?seriesOpts.push({...boxplotSeriesBase,datasetId:"static-boxplot-summaries",xAxisId:"value-x-axis",encode:{x:"xAxisValue",y:["min","firstQuartile","median","thirdQuartile","max"]}}):seriesOpts.push({...boxplotSeriesBase,datasetId:"dynamic-boxplot-summaries",xAxisId:"value-x-axis"}),pointDatasetIds.forEach(id=>{seriesOpts.push({type:"scatter",datasetId:id,name:id,xAxisId:"value-x-axis",encode:{x:"xAxisValue",y:"value"},symbolSize:boxplotChartTheme.pointSymbolSize,symbol:"points"===id?"circle":getCategoryPointStyle(id,hasPointCategories,pointCategoryShapes,getCategoryPointShape,pointCategories,"circle"),itemStyle:{color:"points"===id?"#8b8ad1":getCategoryPointStyle(id,hasPointCategories,pointCategoryColors,getCategoryPointColor,pointCategories,"#8b8ad1"),opacity:pointOpacity||.8},tooltip:{formatter:params=>{if(pointTooltipFormatter)return pointTooltipFormatter(params.data,params);return`${params.data.value}`}}})});const option={legend:{show:showLegend,data:pointDatasetIds,orient:"horizontal",left:"left",top:"bottom",itemHeight:boxplotChartTheme.pointSymbolSize,itemWidth:boxplotChartTheme.pointSymbolSize,selectedMode:!1},grid:{...boxplotChartTheme.grid,top:title?60:20},title:this.getTitleOptions(boxplotChartTheme,xAxisTitle,title),aria:{enabled:!0},dataset:datasetOpts,xAxis:this.getXAxisOptions(xAxisCategories,xAxisLabelFormatter,xAxisLabelTooltipFormatter,boxplotChartTheme),yAxis:this.getYAxisOptions(yAxisTitle,yAxisMin,yAxisMax,boxplotChartTheme),tooltip:boxplotChartTheme.tooltip,series:seriesOpts};this.chart.setOption(option,!0)}}class LegendChart{INITIAL_CHART_HEIGHT="25px";chart;constructor(chartDom,legendProps){this.chart=initChart(chartDom,this.INITIAL_CHART_HEIGHT),this.setOptions(legendProps)}destroy(){this.chart?.dispose()}setOptions(legendProps){if(!this.chart)return;const{pointStyles,chartStyle}=legendProps,chartTheme="grayGrid"===chartStyle?grayGridBaseChartTheme:minimalBaseChartTheme,option={legend:{data:pointStyles.map(item=>item.label),orient:"horizontal",left:"left",top:"bottom",itemHeight:chartTheme.pointSymbolSize,itemWidth:chartTheme.pointSymbolSize,selectedMode:!1},xAxis:{show:!1},yAxis:{show:!1},series:pointStyles.map(item=>({name:item.label,type:"scatter",symbol:item.shape,data:[[0,0]],itemStyle:{color:item.color,opacity:item.opacity},symbolSize:chartTheme.pointSymbolSize}))};this.chart.setOption(option,!0)}}const staticBoxplotPoints=[{xAxisCategory:"CAT1",value:25},{xAxisCategory:"CAT2",value:35},{xAxisCategory:"CAT3",value:45},{xAxisCategory:"CAT4",value:55}],staticBoxplotSummaries=[{xAxisCategory:"CAT1",min:10,firstQuartile:20,median:30,thirdQuartile:40,max:50},{xAxisCategory:"CAT2",min:15,firstQuartile:25,median:35,thirdQuartile:45,max:55},{xAxisCategory:"CAT3",min:20,firstQuartile:30,median:40,thirdQuartile:50,max:60},{xAxisCategory:"CAT4",min:20,firstQuartile:30,median:40,thirdQuartile:50,max:60}],dynamicBoxplotPoints=[{xAxisCategory:"Control1",value:573,pointCategory:"Female"},{xAxisCategory:"Control1",value:317,pointCategory:"Female"},{xAxisCategory:"Control1",value:759,pointCategory:"Female"},{xAxisCategory:"Control2",value:809,pointCategory:"Female"},{xAxisCategory:"Control2",value:537,pointCategory:"Female"},{xAxisCategory:"Control2",value:590,pointCategory:"Female"},{xAxisCategory:"Experimental",value:596,pointCategory:"Female"},{xAxisCategory:"Experimental",value:416,pointCategory:"Female"},{xAxisCategory:"Experimental",value:626,pointCategory:"Female"},{xAxisCategory:"Control1",value:877,pointCategory:"Male"},{xAxisCategory:"Control1",value:699,pointCategory:"Male"},{xAxisCategory:"Control1",value:854,pointCategory:"Male"},{xAxisCategory:"Control2",value:550,pointCategory:"Male"},{xAxisCategory:"Control2",value:919,pointCategory:"Male"},{xAxisCategory:"Control2",value:407,pointCategory:"Male"},{xAxisCategory:"Experimental",value:982,pointCategory:"Male"},{xAxisCategory:"Experimental",value:336,pointCategory:"Male"},{xAxisCategory:"Experimental",value:856,pointCategory:"Male"}],mockPointStyles=[{label:"Female",color:"#DB00FF",shape:"triangle",opacity:.5},{label:"Male",color:"#1B00B3",shape:"circle",opacity:.5}]}}]);