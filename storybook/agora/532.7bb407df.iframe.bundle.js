(self.webpackChunksage_monorepo=self.webpackChunksage_monorepo||[]).push([[532],{"./libs/agora/charts/src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{J2:()=>BiodomainsChartComponent,lc:()=>ScoreBarChartComponent});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.4.1/node_modules/tslib/tslib.es6.js");var biodomains_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/biodomains-chart/biodomains-chart.component.scss?ngResource"),biodomains_chart_componentngResource_default=__webpack_require__.n(biodomains_chart_componentngResource),root_effect_scheduler=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),debug_node=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/debug_node.mjs"),core=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/core.mjs"),src=__webpack_require__("./libs/agora/services/src/index.ts"),d3_src=__webpack_require__("./node_modules/.pnpm/d3@7.9.0/node_modules/d3/src/index.js");let BiodomainsChartComponent=class BiodomainsChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);data;geneName="";selectedBioDomainIndex=new debug_node.bkB;chartRef={};tooltip={};highlightColor="#5081A7";selectedBioDomain="";selectedIndex=0;initialized=!1;chart;ngOnChanges(changes){changes.data&&!changes.data.firstChange&&(this.hideChart(),this.createChart())}ngOnInit(){this.createChart()}ngOnDestroy(){this.destroyChart()}hideChart(){const svg=d3_src.Ltv(this.chartRef.nativeElement);svg.selectAll("*").remove(),svg.style("display","none")}initChart(){this.selectedIndex=0,this.selectedBioDomain=""}createChart(){if(this.initChart(),this.selectedBioDomainIndex.emit(this.selectedIndex),this.data){const svg=this.chart=d3_src.Ltv(this.chartRef.nativeElement);this.selectedIndex>=0&&(this.selectedBioDomain=this.data[this.selectedIndex].biodomain),svg.attr("width",500).attr("height",560),svg.style("display","block");const labelWidth=200,barColor="#8B8AD1",xScale=d3_src.m4Y().domain([0,d3_src.T9B(this.data,d=>d.pct_linking_terms)]).range([0,200]),yScale=d3_src.WH().domain(this.data.map(d=>d.biodomain)).range([0,560]).paddingInner(.4);svg.selectAll(".negative-bars").data(this.data).enter().append("rect").attr("class","negative-bars").attr("x",d=>labelWidth+xScale(d.pct_linking_terms)).attr("y",d=>yScale(d.biodomain)||0).attr("width",d=>500-labelWidth-xScale(d.pct_linking_terms)).attr("height",yScale.bandwidth()).attr("fill","white").on("click",event=>{const index=svg.selectAll(".negative-bars").nodes().indexOf(event.target);this.handleClick(bars,labels,barValues,index)}).on("mouseenter",event=>{const index=svg.selectAll(".negative-bars").nodes().indexOf(event.target);this.handleMouseEnter(bars,labels,barValues,index)}).on("mouseleave",event=>{const index=svg.selectAll(".negative-bars").nodes().indexOf(event.target);this.handleMouseLeave(bars,labels,barValues,index)});const bars=svg.selectAll(".bars").data(this.data).enter().append("rect").attr("class","bars").attr("x",labelWidth).attr("y",d=>yScale(d.biodomain)||0).attr("width",d=>xScale(d.pct_linking_terms)).attr("height",yScale.bandwidth()).attr("fill",barColor).style("fill-opacity",d=>this.selectedBioDomain===d.biodomain?"100%":"50%").on("click",event=>{const index=svg.selectAll(".bars").nodes().indexOf(event.target);this.handleClick(bars,labels,barValues,index)}).on("mouseover",event=>{const index=svg.selectAll(".bars").nodes().indexOf(event.target);this.handleMouseEnter(bars,labels,barValues,index)}).on("mouseleave",event=>{const index=svg.selectAll(".bars").nodes().indexOf(event.target);this.handleMouseLeave(bars,labels,barValues,index)}),labels=svg.selectAll(".bar-labels").data(this.data).enter().append("text").attr("class","bar-labels").attr("x",labelWidth-10).attr("y",d=>(yScale(d.biodomain)||0)+yScale.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","end").style("font-size","12px").style("font-weight",d=>this.selectedBioDomain===d.biodomain?"bold":"normal").text(d=>d.biodomain).on("click",event=>{const index=svg.selectAll(".bar-labels").nodes().indexOf(event.target);this.handleClick(bars,labels,barValues,index)}).on("mouseover",event=>{const index=svg.selectAll(".bar-labels").nodes().indexOf(event.target);this.handleMouseEnter(bars,labels,barValues,index)}).on("mousemove",(event,data)=>{const tooltipText=this.getToolTipText(data.pct_linking_terms),tooltipCoordinates=this.getTooltipCoordinates(event.offsetX,yScale.bandwidth(),yScale(data.biodomain)||0);this.showTooltip(tooltipText,tooltipCoordinates.X,tooltipCoordinates.Y)}).on("mouseleave",event=>{const index=svg.selectAll(".bar-labels").nodes().indexOf(event.target);this.handleMouseLeave(bars,labels,barValues,index),this.hideTooltip(event)}),barValues=svg.selectAll(".bar-values").data(this.data).enter().append("text").attr("class","bar-values").attr("x",d=>labelWidth+xScale(d.pct_linking_terms)+4).attr("y",d=>(yScale(d.biodomain)||0)+yScale.bandwidth()/2).attr("dy","0.35em").attr("text-anchor","start").style("font-size","12px").text(data=>{let percentage=this.helperService.roundNumber(data.pct_linking_terms,1);return"0.0"===percentage&&(percentage="0"),`${percentage}%`}).style("display",d=>this.selectedBioDomain===d.biodomain?"block":"none");this.initialized=!0}else this.hideChart()}handleClick(bars,labels,barValues,index){this.selectedIndex=index,this.selectedBioDomainIndex.emit(index),bars.style("fill-opacity","50%"),labels.style("font-weight","normal"),labels.style("fill","black"),barValues.style("display","none");d3_src.Ltv(bars.nodes()[index]).style("fill-opacity","100%");d3_src.Ltv(labels.nodes()[index]).style("font-weight","bold");d3_src.Ltv(barValues.nodes()[index]).style("display","block")}handleMouseEnter(bars,labels,barValues,index){const bar=d3_src.Ltv(bars.nodes()[index]);this.highlightBar(bar,index);const label=d3_src.Ltv(labels.nodes()[index]);this.highlightLabel(label,index);const barValue=d3_src.Ltv(barValues.nodes()[index]);this.showBarValue(barValue,index)}handleMouseLeave(bars,labels,barValues,index){const bar=d3_src.Ltv(bars.nodes()[index]);this.unhighlightBar(bar,index);const label=d3_src.Ltv(labels.nodes()[index]);this.unhighlightLabel(label,index);const barValue=d3_src.Ltv(barValues.nodes()[index]);this.hideBarValue(barValue,index)}showBarValue(barValue,index){index!==this.selectedIndex&&barValue.style("display","block")}hideBarValue(barValue,index){index!==this.selectedIndex&&barValue.style("display","none")}highlightBar(bar,index){index!==this.selectedIndex&&bar.style("fill-opacity","100%")}unhighlightBar(bar,index){index!==this.selectedIndex&&bar.style("fill-opacity","50%")}highlightLabel(label,index){index!==this.selectedIndex&&(label.style("font-weight","bold"),label.style("fill",this.highlightColor))}unhighlightLabel(label,index){index!==this.selectedIndex&&(label.style("font-weight","normal"),label.style("fill","black"))}getTooltipCoordinates(xBarPosition,yBarWidth,yBarPosition){return{X:xBarPosition,Y:yBarPosition+yBarWidth/2}}getToolTipText(linkingTerms){return 0===linkingTerms?`No GO Terms link this biological domain to ${this.geneName}`:`Click to explore to GO Terms that link this biological domain to ${this.geneName}`}showTooltip(text,x,y){const tooltipElement=this.tooltip.nativeElement;tooltipElement.innerHTML=text,tooltipElement.style.left=`${x}px`,tooltipElement.style.top=`${y}px`,tooltipElement.style.display="block"}hideTooltip(event){const tooltipElement=this.tooltip.nativeElement;tooltipElement&&tooltipElement.contains(event.relatedTarget)||"block"===tooltipElement.style.display&&(tooltipElement.style.display="none")}destroyChart(){this.initialized&&this.chart.remove()}static propDecorators={data:[{type:debug_node.pde}],geneName:[{type:debug_node.pde}],selectedBioDomainIndex:[{type:debug_node.k7i}],chartRef:[{type:core.ViewChild,args:["chart",{static:!0}]}],tooltip:[{type:core.ViewChild,args:["tooltip",{static:!0}]}]}};BiodomainsChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-biodomains-chart",standalone:!0,template:'<div id="biodomains-chart">\n  <div\n    id="biodomains-chart-tooltip"\n    class="arrow-below tooltip-arrow"\n    #tooltip\n    (mouseout)="hideTooltip($event)"\n  ></div>\n  <svg #chart></svg>\n  @if (!data) {\n    <div>No data is currently available</div>\n  }\n</div>\n',encapsulation:debug_node.gXe.None,styles:[biodomains_chart_componentngResource_default()]})],BiodomainsChartComponent);__webpack_require__("./libs/agora/charts/src/lib/box-plot-chart/box-plot-chart.component.ts");var candlestick_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/candlestick-chart/candlestick-chart.component.scss?ngResource"),candlestick_chart_componentngResource_default=__webpack_require__.n(candlestick_chart_componentngResource);var base_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/base-chart/base-chart.component.scss?ngResource"),base_chart_componentngResource_default=__webpack_require__.n(base_chart_componentngResource),dc=__webpack_require__("./node_modules/.pnpm/dc@4.2.7/node_modules/dc/dist/dc.js");let BaseChartComponent=class BaseChartComponent{heading="";name="chart";chart;isLoading=!1;isInitialized=!1;resizeTimer=0;tooltips={};chartContainer={};ngAfterViewInit(){this.isInitialized||this.isLoading||this.init()}ngOnDestroy(){this.destroy()}init(){this.chartContainer?.nativeElement&&(this.isInitialized=!0)}destroy(){if(this.tooltips)for(const name in this.tooltips)this.tooltips[name].remove();this.chart&&dc.chartRegistry.deregister(this.chart)}getTooltip(name,className="",arrowBelow=!1){return this.tooltips[name]||(this.tooltips[name]=d3_src.Ltv("body").append("div").attr("class",`chart-tooltip ${arrowBelow?"arrow-below":"arrow-above"} chart-${name}-tooltip${className?" "+className:""}`)),this.tooltips[name]}showTooltip(name){this.tooltips[name]&&this.tooltips[name].transition().duration(80).style("opacity",1).style("visibility","visible")}hideTooltip(name){this.tooltips[name]&&this.tooltips[name].transition().duration(80).style("top","0").style("left","0").style("opacity",0).style("visibility","hidden")}onResize(){if(!this.chart)return;const self=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{self.chart.width(self.chartContainer.nativeElement.parentElement.offsetWidth).height(self.chartContainer.nativeElement.offsetHeight),self.chart.rescale&&self.chart.rescale(),self.chart.redraw()},100)}getXAxisTooltipText(text){return text}addXAxisTooltips(){const self=this,tooltip=this.getTooltip("x-axis",`chart-x-axis-tooltip ${this.name}-x-axis-tooltip`);this.chart.selectAll("g.axis.x g.tick").each(function(){const tick=d3_src.Ltv(this),tickText=tick.select("text"),tickLine=tick.select("line"),text=self.getXAxisTooltipText(tickText?.text());text&&tickText.on("mouseover",function(){const tickTextNode=tickText.node(),tickLineNode=tickLine.node(),tooltipNode=tooltip.node();if(!tooltipNode||!tickTextNode||!tickLineNode)return;const tickTextRect=tickTextNode.getBoundingClientRect()||null,tickLineRect=tickLineNode.getBoundingClientRect()||null;tooltip.html(text).style("top",`${window.pageYOffset+tickTextRect.top+tickTextRect.height+15}px`).style("left",tickLineRect.left-tooltipNode.offsetWidth/2+"px"),self.showTooltip("x-axis")}).on("mouseout",function(){self.hideTooltip("x-axis")})})}static propDecorators={heading:[{type:debug_node.pde}],chartContainer:[{type:core.ViewChild,args:["chartContainer",{static:!0}]}]}};BaseChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-base-chart",standalone:!0,template:'<div class="chart" (window:resize)="onResize()">\n  <div class="chart-inner">\n    @if (heading) {\n      <h4 class="chart-heading">{{ heading }}</h4>\n    }\n    <div class="chart-body">\n      <div #chartContainer class="chart-container"></div>\n    </div>\n    \x3c!-- @if (!_data) {\n      <div class="chart-no-data">\n        <div class="chart-no-data-text">No data is currently available.</div>\n      </div>\n    } --\x3e\n  </div>\n</div>\n',styles:[base_chart_componentngResource_default()]})],BaseChartComponent);let CandlestickChartComponent=class CandlestickChartComponent extends BaseChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);_gene;get gene(){return this._gene}set gene(gene){this._gene=gene,this.init()}xAxisLabel="";name="candlestick-chart";chartData=[];maxValue=2;minValue=0;chartHeight=500;init(){this._gene?.neuropathologic_correlations?.length&&this.chartContainer.nativeElement?(this.initData(),this.initChart(),this.addXAxisTooltips(),this.isInitialized=!0):this.chartData=[]}destroy(){if(this.tooltips)for(const name in this.tooltips)this.tooltips[name].remove()}initData(){const neuropathCorrelations=this._gene?.neuropathologic_correlations?.filter(item=>"DCFDX"!==item.neuropath_type)||[];neuropathCorrelations.sort((a,b)=>a.neuropath_type>b.neuropath_type?1:-1),this.chartData=neuropathCorrelations.map(item=>({key:item.neuropath_type,ensg:item.ensg,value:{min:item.ci_lower,max:item.ci_upper,mean:item.oddsratio,pval_adj:item.pval_adj}}))}initChart(){const self=this,chartContainerEl=this.chartContainer.nativeElement,chartContainer=d3_src.Ltv(chartContainerEl),margin_top=100,margin_right=0,margin_bottom=10,margin_left=80,width=chartContainerEl.offsetWidth-margin_left-margin_right,height=this.chartHeight-margin_top-margin_bottom,color=this.helperService.getColor("secondary"),tooltip=this.getTooltip("internal","chart-value-tooltip candlestick-chart-value-tooltip");this.chart&&this.chart.remove();const svg=chartContainer.append("svg").attr("width",width).attr("height",height);this.chart=svg;const group=svg.append("g").attr("transform",`translate(${margin_left}, 10)`),x=d3_src.WH().range([0,width]).domain(this.chartData.map(item=>item.key)).paddingInner(1).paddingOuter(.5);group.append("g").attr("transform","translate(0,"+height+")").attr("class","axis x").call(d3_src.l78(x));const y=d3_src.m4Y().domain([this.minValue,this.maxValue]).range([height,0]);group.append("g").attr("class","axis y-axis").call(d3_src.V4s(y)),group.append("text").attr("class","y-axis-label y-label").attr("transform",`rotate(-90) translate(${-height/2}, ${20-margin_left})`).style("text-anchor","middle").style("font-weight","bold").text("ODDS RATIO"),group.selectAll(".vertLines").data(this.chartData).enter().append("line").attr("class","vertLines").attr("x1",d=>x(d.key)).attr("x2",d=>x(d.key)).attr("y1",d=>y(d.value.min)).attr("y2",d=>y(d.value.max)).attr("stroke",color).attr("stroke-width",1.5);group.selectAll(".meanCircle").data(this.chartData).enter().append("circle").attr("class","meanCircle").attr("cx",d=>x(d.key)).attr("cy",d=>y(d.value.mean)).attr("r",9).attr("stroke",color).style("fill",color).on("mouseover",function(event,d){const isOrNot=d.value.pval_adj<=.05?"is":"is not",text=`${self._gene?.hgnc_symbol||self._gene?.ensembl_gene_id} ${isOrNot} significantly correlated with ${d.key}, with an odds ratio of ${self.helperService.getSignificantFigures(d.value.mean,3)} and an adjusted p-value of ${self.helperService.getSignificantFigures(d.value.pval_adj,3)}.`,offset=self.helperService.getOffset(this);tooltip.text(text).style("left",(offset?.left||0)+"px").style("top",(offset?.top||0)+"px"),self.showTooltip("internal")}).on("mouseout",function(){self.hideTooltip("internal")}),group.append("g").attr("transform",`translate(0,${y(1)})`).append("line").attr("class","yAxisGuide").attr("x2",width).style("stroke","red").style("stroke-width","1px")}onResize(){if(!this.chart)return;const self=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{self.initChart()},100)}static propDecorators={gene:[{type:debug_node.pde}],xAxisLabel:[{type:debug_node.pde}]}};CandlestickChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-candlestick-chart",standalone:!0,template:'<div class="chart candlestick-chart" (window:resize)="onResize()">\n  <div class="chart-inner">\n    @if (heading) {\n      <h4 class="chart-heading">{{ heading }}</h4>\n    }\n    <div class="chart-body">\n      <div #chartContainer class="chart-container"></div>\n    </div>\n    @if (xAxisLabel) {\n      <div class="chart-x-axis-label">{{ xAxisLabel }}</div>\n    }\n    @if (!chartData.length) {\n      <div class="chart-no-data">\n        <div class="chart-no-data-text">No data is currently available.</div>\n      </div>\n    }\n    \x3c!-- <loading-overlay [isActive]="!isInitialized"></loading-overlay> --\x3e\n  </div>\n</div>\n',styles:[candlestick_chart_componentngResource_default()]})],CandlestickChartComponent);var median_barchart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/median-barchart/median-barchart.component.scss?ngResource"),median_barchart_componentngResource_default=__webpack_require__.n(median_barchart_componentngResource);let MedianBarChartComponent=class MedianBarChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);chartInitialized=!1;tooltipInitialized=!1;_data=[];chart;tooltip;MEANINGFUL_EXPRESSION_THRESHOLD=Math.log2(5);maxValueY=-1;MIN_CHART_WIDTH=500;CHART_HEIGHT=350;chartMargin={top:20,right:20,bottom:65,left:65};chartXScale;chartXAxisDrawn;chartXAxisLabel;chartBars;chartScoreLabels;chartThresholdLine;shouldShowThresholdLine=!1;resizeTimer=0;get data(){return this._data}set data(data){this._data=data.filter(el=>el.median&&el.median>0).sort((a,b)=>a.tissue.localeCompare(b.tissue)),this.maxValueY=d3_src.T9B(this._data,d=>d.median)||0,this.shouldShowThresholdLine=this.MEANINGFUL_EXPRESSION_THRESHOLD<=this.maxValueY}shouldResize=!0;xAxisLabel="";yAxisLabel="LOG2 CPM";medianBarChartContainer={};chartRef={};tooltipRef={};onResize(){if(this.shouldResize&&this.chartInitialized){const self=this,divSize=this.medianBarChartContainer.nativeElement.getBoundingClientRect().width;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{self.resizeChart(divSize)},100)}}ngOnChanges(changes){(changes._data&&!changes._data.firstChange||changes.xAxisLabel&&!changes.xAxisLabel.firstChange||changes.yAxisLabel&&!changes.yAxisLabel.firstChange)&&(0===this._data.length?(this.clearChart(),this.hideChart()):(this.clearChart(),this.showChart(),this.createChart()))}ngAfterViewInit(){0===this._data.length?this.hideChart():this.createChart()}ngOnDestroy(){this.destroyChart()}clearChart(){d3_src.Ltv(this.chartRef.nativeElement).selectAll("*").remove()}hideChart(){d3_src.Ltv(this.chartRef.nativeElement).style("display","none")}showChart(){d3_src.Ltv(this.chartRef.nativeElement).style("display","block")}destroyChart(){this.chartInitialized&&this.chart.remove(),this.tooltipInitialized&&this.tooltip.remove()}showTooltip(text,x,y){this.tooltip=d3_src.Ltv(this.tooltipRef.nativeElement).style("left",`${x}px`).style("top",`${y}px`).style("display","block").html(text),this.tooltipInitialized=!0}hideTooltip(){this.tooltipInitialized&&this.tooltip.style("display","none")}getBarCenterX(tissue,xScale){return(xScale(tissue)||0)+xScale.bandwidth()/2}getChartBoundingWidth(){return d3_src.Ltv(this.chartRef.nativeElement).node()?.getBoundingClientRect().width||this.MIN_CHART_WIDTH}createChart(){if(this._data.length>0){const barColor=this.helperService.getColor("secondary"),width=this.getChartBoundingWidth(),height=this.CHART_HEIGHT,innerWidth=width-this.chartMargin.left-this.chartMargin.right,innerHeight=height-this.chartMargin.top-this.chartMargin.bottom;this.chart=d3_src.Ltv(this.chartRef.nativeElement).attr("width",width).attr("height",height).append("g").attr("transform",`translate(${this.chartMargin.left}, ${this.chartMargin.top})`),this.chartXScale=d3_src.WH().domain(this._data.map(d=>d.tissue)).range([0,innerWidth]).padding(.2);const yScale=d3_src.m4Y().domain([0,this.maxValueY]).nice().range([innerHeight,0]);this.chartBars=this.chart.selectAll(".medianbars").data(this._data).enter().append("rect").attr("class","medianbars").attr("x",d=>this.chartXScale(d.tissue)).attr("y",d=>yScale(d.median||0)).attr("width",this.chartXScale.bandwidth()).attr("height",d=>innerHeight-yScale(d.median||0)).attr("fill",barColor),this.chartScoreLabels=this.chart.selectAll(".bar-labels").data(this._data).enter().append("text").attr("class","bar-labels").attr("x",d=>this.getBarCenterX(d.tissue,this.chartXScale)).attr("y",d=>yScale(d.median||0)-5).text(d=>this.helperService.roundNumber(d.median||0,2));const xAxis=d3_src.l78(this.chartXScale);this.chartXAxisDrawn=this.chart.append("g").attr("class","x-axis").attr("transform",`translate(0, ${innerHeight})`).call(xAxis.tickSizeOuter(0)),this.chartXAxisDrawn.selectAll(".tick").on("mouseenter",(_,tissue)=>{const tooltipText=this.helperService.getGCTColumnTooltipText(tissue);this.showTooltip(tooltipText,this.getBarCenterX(tissue,this.chartXScale)+this.chartMargin.left,height-this.chartMargin.top)}).on("mouseleave",()=>{this.hideTooltip()});const yAxis=d3_src.V4s(yScale);this.chart.append("g").attr("class","y-axis").call(yAxis),this.chartXAxisLabel=this.chart.append("text").attr("class","x-axis-label").attr("x",innerWidth/2).attr("y",innerHeight+this.chartMargin.bottom).attr("text-anchor","middle").text(this.xAxisLabel),this.chart.append("text").attr("class","y-axis-label").attr("x",-innerHeight/2).attr("y",-this.chartMargin.left).attr("dy","1em").attr("text-anchor","middle").attr("transform","rotate(-90)").text(this.yAxisLabel),this.shouldShowThresholdLine&&(this.chartThresholdLine=this.chart.append("line").attr("class","meaningful-expression-threshold-line").attr("x1",0).attr("x2",innerWidth).attr("y1",yScale(this.MEANINGFUL_EXPRESSION_THRESHOLD)).attr("y2",yScale(this.MEANINGFUL_EXPRESSION_THRESHOLD)).attr("stroke","red")),this.chartInitialized=!0}}resizeChart=divSize=>{const width=Math.max(divSize,this.MIN_CHART_WIDTH),innerWidth=width-this.chartMargin.left-this.chartMargin.right;this.chart.attr("width",width),this.chartXScale.range([0,innerWidth]),this.chartBars.transition().attr("x",d=>this.chartXScale(d.tissue)).attr("width",this.chartXScale.bandwidth()),this.chartScoreLabels.transition().attr("x",d=>this.getBarCenterX(d.tissue,this.chartXScale));const xAxis=d3_src.l78(this.chartXScale);this.chartXAxisDrawn.transition().call(xAxis.tickSizeOuter(0)),this.chartXAxisLabel.transition().attr("x",innerWidth/2),this.shouldShowThresholdLine&&this.chartThresholdLine.transition().attr("x2",innerWidth)};static propDecorators={data:[{type:debug_node.pde}],shouldResize:[{type:debug_node.pde}],xAxisLabel:[{type:debug_node.pde}],yAxisLabel:[{type:debug_node.pde}],medianBarChartContainer:[{type:core.ViewChild,args:["medianBarChartContainer"]}],chartRef:[{type:core.ViewChild,args:["chart"]}],tooltipRef:[{type:core.ViewChild,args:["tooltip"]}],onResize:[{type:debug_node.Z$l,args:["window:resize",["$event.target"]]}]}};MedianBarChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-median-barchart",standalone:!0,template:'<div id="median-barchart" #medianBarChartContainer class="chart-d3">\n  <div id="tooltip" class="arrow-above tooltip-arrow" #tooltip (mouseout)="hideTooltip()"></div>\n  <svg #chart></svg>\n  @if (data.length === 0) {\n    <div class="chart-no-data">\n      <div class="chart-no-data-text">No data is currently available.</div>\n    </div>\n  }\n</div>\n',encapsulation:debug_node.gXe.None,styles:[median_barchart_componentngResource_default()]})],MedianBarChartComponent);var median_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/median-chart/median-chart.component.scss?ngResource"),median_chart_componentngResource_default=__webpack_require__.n(median_chart_componentngResource),main=__webpack_require__("./node_modules/.pnpm/crossfilter2@1.5.4/node_modules/crossfilter2/main.js");let MedianChartComponent=class MedianChartComponent extends BaseChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);_data=[];get data(){return this._data}set data(data){this._data=data,this.init()}xAxisLabel="";yAxisLabel="LOG2 CPM";name="median-chart";dimension;group;init(){this._data?.length&&this.chartContainer.nativeElement&&(this.initData(),this.initChart(),this.isInitialized=!0)}initData(){const ndx=(0,main.A)(this.data);this.dimension=ndx.dimension(d=>d.tissue),this.group=this.dimension.group().reduceSum(d=>this.helperService.getSignificantFigures(d.median))}initChart(){const self=this;this.chart=dc.barChart(this.chartContainer.nativeElement).dimension(this.dimension).group(this.group).brushOn(!1),this.chart.x(d3_src.WH()).xUnits(dc.units.ordinal).xAxis(),this.chart.y(d3_src.m4Y().domain([0,this.group.top(1)[0]?.value||0])).yAxisLabel(this.yAxisLabel).yAxis().ticks(3),this.chart.colors([this.helperService.getColor("secondary")]),this.chart.margins({left:70,right:0,bottom:30,top:50}).barPadding(.5),this.chart.renderLabel(!0).turnOnControls(!1).renderTitle(!1),this.chart.on("renderlet",chart=>{if(chart){const yDomainLength=Math.abs(chart.y().domain()[1]-chart.y().domain()[0]);chart.selectAll("rect").each((el,i,tree)=>{el&&el.y<=0&&tree[i].setAttribute("height",0)}),chart.selectAll("rect").attr("pointer-events","none"),chart.selectAll("text").each((el,i,tree)=>{el&&el.data&&el.data.value<0&&(el.data.value="",el.y="",tree[i].innerHTML="")});const mult=chart.effectiveHeight()/yDomainLength,lefty=0,righty=0,extradata=[{x:chart.x().range()[0],y:chart.y()(lefty)},{x:chart.x().range()[1],y:chart.y()(righty)}],line=d3_src.n8j().x(d=>d.x).y(()=>Math.abs(chart.y().domain()[1]-Math.log2(5))*mult);let path=chart.select("g.chart-body").selectAll("path.extra").data([extradata]);path=path.enter().append("path").attr("class","extra").attr("stroke","red").attr("id","extra-line").merge(path),path.attr("d",line),self.addXAxisTooltips()}}),this.chart.filter=()=>"",this.chart.render()}getXAxisTooltipText(text){return this.helperService.getGCTColumnTooltipText(text)}static propDecorators={data:[{type:debug_node.pde}],xAxisLabel:[{type:debug_node.pde}],yAxisLabel:[{type:debug_node.pde}]}};MedianChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-median-chart",standalone:!0,template:'<div class="chart median-chart" (window:resize)="onResize()">\n  <div class="chart-inner">\n    @if (heading) {\n      <h4 class="chart-heading">{{ heading }}</h4>\n    }\n    <div class="chart-body">\n      <div #chartContainer class="chart-container"></div>\n    </div>\n    @if (xAxisLabel) {\n      <div class="chart-x-axis-label">{{ xAxisLabel }}</div>\n    }\n    @if (!data.length) {\n      <div class="chart-no-data">\n        <div class="chart-no-data-text">No data is currently available.</div>\n      </div>\n    }\n  </div>\n</div>\n',styles:[median_chart_componentngResource_default()]})],MedianChartComponent);var network_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/network-chart/network-chart.component.scss?ngResource"),network_chart_componentngResource_default=__webpack_require__.n(network_chart_componentngResource);const a=Math.pow(3,.25);const basePoints=d3_src.y17(6).map(p=>Math.PI/3*p).map(p=>({x:Math.cos(p),y:Math.sin(p)})),hexagonSymbol={draw:function(context,size){const len=function sideLength(area){return a*Math.sqrt(area/9*2)}(size),points=basePoints.map(({x,y})=>({x:x*len,y:y*len})),{x,y}=points[0];context.moveTo(x,y);for(let p=1;p<points.length;p++){const{x,y}=points[p];context.lineTo(x,y)}context.closePath()}};let NetworkChartComponent=class NetworkChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);_data;get data(){return this._data}set data(data){this._data=data,this.init()}_selectedFilter=0;get selectedFilter(){return this._selectedFilter}set selectedFilter(n){this._selectedFilter=n,this.filter()}width=800;height=800;group;nodes;links;mainNode;texts;simulation;selectedNode;zoomHandler;chart;isInitialized=!1;resizeTimer=0;chartContainer={};onNodeClick=new debug_node.bkB;init(){this._data?.nodes?.length&&this.chartContainer?.nativeElement&&(this.initChart(),this.isInitialized=!0)}initChart(){this._data?.nodes?.length&&(this.width=this.chartContainer.nativeElement.parentElement.offsetWidth-30,this.height=400+this._data.nodes.length/100*700,this.chart=d3_src.Ltv(this.chartContainer.nativeElement).append("svg").attr("width",this.width).attr("height",this.height),this.group=this.chart.append("g"),this.initZoom(),this.initLinks(),this.initNodes(),this.initSimulation(),this.filter())}initZoom(){this.zoomHandler=d3_src.s_O().scaleExtent([1,1]).translateExtent([[-200,-300],[this.width+200,this.height+300]]).on("zoom",e=>{this.group.attr("transform",e.transform)}),this.zoomHandler(this.chart),this.chart.call(this.zoomHandler)}initLinks(){this._data?.links?.length&&(this.links=this.group.selectAll("line").data(this._data.links).enter().append("line").attr("stroke-width",2),this.updateLinkClasses())}getLinkClasses(link){const classes=["network-chart-link"];return link.class&&classes.push(link.class),classes.join(" ")}updateLinkClasses(){this.links.attr("class",link=>this.getLinkClasses(link))}initNodes(){this._data?.nodes?.length&&(this.selectedNode=this._data.nodes[0],this.mainNode=this.group.selectAll("path").data([this._data.nodes[0]]).enter().append("path").attr("d",d3_src.HRO().size(900).type(hexagonSymbol)).on("click",(e,NetworkNode)=>{this.selectedNode=NetworkNode,this.updateNodesClasses(),this.onNodeClick.emit(NetworkNode)}),this.nodes=this.group.selectAll("circle").data(this._data.nodes.slice(1)).enter().append("circle").attr("r",10).on("click",(e,node)=>{this.selectedNode=node,this.updateNodesClasses(),this.onNodeClick.emit(node)}),this.texts=this.group.selectAll("text").data(this._data.nodes).enter().append("text").text(node=>node?.label).attr("font-size",12),this.updateNodesClasses())}getNodeClasses(node){const classes=["network-chart-node"];return node.id===this._data?.nodes[0].id&&classes.push("main"),node.id===this.selectedNode?.id&&classes.push("selected"),node.class&&classes.push(node.class),classes.join(" ")}updateNodesClasses(){this.mainNode.attr("class",node=>this.getNodeClasses(node)),this.nodes.attr("class",node=>this.getNodeClasses(node))}initSimulation(){this._data?.nodes?.length&&(this.simulation=d3_src.tXi(this._data.nodes).force("NetworkLink",d3_src.kJC().id(function(d){return d.id}).links(this._data.links)).force("charge",d3_src.xJS().strength(-450)).force("center",d3_src.jTM(this.width/2,this.height/2)).force("collision",d3_src.eRw().radius(()=>35)).alphaDecay(.5).on("end",()=>{this.refreshPositions()}))}refreshPositions(){this.links.attr("x1",function(d){return d.source.x}).attr("y1",function(d){return d.source.y}).attr("x2",function(d){return d.target.x}).attr("y2",function(d){return d.target.y}),this.nodes.attr("cx",function(d){return d.x}).attr("cy",function(d){return d.y}),this.mainNode.style("transform",function(d){return"translate("+d.x+"px, "+d.y+"px) rotate(30deg)"}),this.texts.attr("x",function(d){return d.x}).attr("dx",d=>16*-d.label.length/2/2).attr("y",function(d){return d.y+30})}filter(){const hiddenNodes=[];this.nodes.attr("display",node=>(node.value||0)<this._selectedFilter?(hiddenNodes.push(node.id),"none"):"block"),this.texts.attr("display",node=>(node.value||0)<this._selectedFilter?"none":"block"),this.links.attr("display",link=>hiddenNodes.includes(link.source.id)||hiddenNodes.includes(link.target.id)?"none":"block")}onResize(){const self=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{self.width=self.chartContainer.nativeElement.parentElement.offsetWidth-30,self.height=400+(self._data?.nodes?.length||0)/100*700,self.chart.attr("width",self.width).attr("height",self.height),self.group.attr("transform","translate(0, 0)")},100)}static propDecorators={data:[{type:debug_node.pde}],selectedFilter:[{type:debug_node.pde}],chartContainer:[{type:core.ViewChild,args:["chartContainer",{static:!0}]}],onNodeClick:[{type:debug_node.k7i}]}};NetworkChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-network-chart",standalone:!0,template:'<div class="chart network-chart" (window:resize)="onResize()">\n  <div class="chart-inner">\n    <div class="chart-body">\n      <div #chartContainer class="chart-container"></div>\n    </div>\n    @if (!this._data?.nodes?.length) {\n      <div class="chart-no-data">\n        <div class="chart-no-data-text">No data is currently available.</div>\n      </div>\n    }\n  </div>\n</div>\n',styles:[network_chart_componentngResource_default()]})],NetworkChartComponent);var row_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/row-chart/row-chart.component.scss?ngResource"),row_chart_componentngResource_default=__webpack_require__.n(row_chart_componentngResource);d3_src.r1M.prototype.nodes=function(){const nodes=new Array(this.size());let i=-1;return this.each(function(){nodes[++i]=this}),nodes};let RowChartComponent=class RowChartComponent extends BaseChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);_data=[];get data(){return this._data}set data(data){this._data=data,this.init()}xAxisLabel="";paddingLR=15;paddingUD=0;name="row-chart";group;dimension;leftAxis={};max=-1/0;canDisplay=!1;canResize=!1;colors=[this.helperService.getColor("secondary")];init(){this._data?.length&&this.chartContainer?.nativeElement&&(this.initData(),this.initChart(),this.isInitialized=!0)}initData(){const self=this;this.group={all:()=>self._data,order:()=>{},top:()=>{}},this.dimension={filter:()=>{},filterAll:()=>{}}}initChart(){const self=this;this.chart=dc.rowChart(this.chartContainer.nativeElement),this.chart.group(this.group).dimension(this.dimension),this.chart.gap(4).title(!1).valueAccessor(d=>self.helperService.getSignificantFigures(+d.value.logfc,3)).keyAccessor(d=>d.key[0]).label(d=>d.key[0]).on("preRender",function(chart){self.max=-1/0,self.updateXDomain(),self.max!==-1/0&&(self.max*=1.1,chart.x(d3_src.m4Y().range([0,self.chartContainer.nativeElement.offsetWidth-40]).domain([-self.max,self.max])),chart.xAxis().scale(chart.x()))}).on("preRedraw",function(chart){self.max=-1/0,self.updateXDomain(),self.max!==-1/0&&(self.max*=1.1,chart.x(d3_src.m4Y().range([0,self.chartContainer.nativeElement.offsetWidth-40]).domain([-self.max,self.max])),chart.xAxis().scale(chart.x()))}).on("renderlet",function(chart){self.moveTextToElement(chart,self.leftAxis.nativeElement,9),dc.events.trigger(function(){self.updateChartExtras(chart)})}).ordinalColors(self.colors).transitionDuration(0),this.chart.render()}addXLabel(chart,text,svg,width=0,height=0){const textSelection=svg||chart.svg();if(null!==textSelection){const label=textSelection.select(".x-axis-label");label.node()?label.attr("x",width/2).attr("y",height-10):textSelection.append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",width/2).attr("y",height-10).text(text),this.adjustXLabel(chart,textSelection,width,height)}}adjustXLabel(chart,sel,width=0,height=0){const svgEl=sel.node()||chart.svg();if(null!==svgEl){const textDims=svgEl.getBBox();sel.attr("x",(width-45)/2+30).attr("y",height-Math.ceil(textDims.height)/2)}}updateChartExtras(chart){let rectHeight=chart.select("g.row rect").empty()?52:parseInt(chart.select("g.row rect").attr("height"),10);rectHeight=isNaN(rectHeight)?52:rectHeight;this.insertLinesInRows(chart),this.insertTextsInRows(chart),this.insertTextsInRows(chart,"confidence-text-left"),this.insertTextsInRows(chart,"confidence-text-right"),this.drawLines(chart,rectHeight/2),this.rectToCircles(chart,18,rectHeight),this.updateXTicks(chart),this.renderConfidenceTexts(chart,rectHeight/2,60,!0),this.renderConfidenceTexts(chart,rectHeight/2,60)}updateXDomain(){this._data.forEach(g=>{Math.abs(+g.ci_l)>this.max&&(this.max=Math.abs(+g.ci_l)),Math.abs(+g.ci_r)>this.max&&(this.max=Math.abs(+g.ci_r))})}updateXTicks(chart){const allTicks=chart.selectAll("g.axis g.tick");allTicks.each(function(i){const el=d3_src.Ltv(this);let value=parseFloat(el.select("text").text());isNaN(value)&&(value=parseFloat("-"+el.select("text").text().replace(/[^,.0-9]/g,""))),i>0&&i<allTicks.size()-1?value&&(el.selectAll("line").style("opacity",0),el.select("text").style("opacity",0)):value&&(el.selectAll("line").style("opacity",0),el.select("text").style("opacity",1))})}adjustTextToElement(el){d3_src.Ltv(el).selectAll("g.textGroup text").each(function(){const pRigth=isNaN(parseInt(d3_src.Ltv(el).style("padding-right"),10))?15:parseInt(d3_src.Ltv(el).style("padding-right"),10),transfString=d3_src.Ltv(this).attr("transform"),translateString=transfString.substring(transfString.indexOf("(")+1,transfString.indexOf(")")),translate=translateString.split(",").length>1?translateString.split(","):translateString.split(" "),transfX=(isNaN(parseFloat(d3_src.Ltv(el).select("svg").style("width")))?450:parseFloat(d3_src.Ltv(el).select("svg").style("width")))-pRigth,ftransfx=isNaN(transfX)?0:transfX;d3_src.Ltv(this).attr("transform",()=>"translate("+ftransfx+","+parseFloat(translate[1])+")")})}moveTextToElement(chart,el,vSpacing=0){const self=this,svg=d3_src.Ltv(el).html("").append("svg"),group=svg.append("g").attr("class","textGroup"),texts=chart.selectAll("g.row > text"),tooltip=this.getTooltip("x-axis","chart-x-axis-tooltip row-chart-x-axis-tooltip");texts.each(function(){this.style.display="none",group.append("text").html(this.innerHTML).attr("x",0).attr("y",this.getAttribute("y")).attr("dy",this.getAttribute("dy"))});const svgEl=chart.select("g.axis g.tick line.grid-line").node();if(svgEl){const step=svgEl.getBBox().height/texts.nodes().length;svg.selectAll("text").each(function(d,i){const currentStep=step*i,transfX=parseFloat(svg.style("width"))-parseFloat(d3_src.Ltv(el).style("padding-right")),ftransfx=isNaN(transfX)?0:transfX,tickText=d3_src.Ltv(this);tickText.attr("text-anchor","end").attr("transform",()=>"translate("+ftransfx+","+(currentStep+vSpacing)+")").on("mouseover",function(){const tickTextNode=tickText.node();if(!tooltip.node()||!tickTextNode)return;tooltip.html(self.helperService.getGCTColumnTooltipText(tickText.text()));const tickTextRect=tickTextNode.getBoundingClientRect()||null;tooltip.style("top",window.pageYOffset+tickTextRect.top-15+"px").style("left",`${tickTextRect.left+tickTextRect.width+15}px`),self.showTooltip("x-axis")}).on("mouseout",function(){self.hideTooltip("x-axis")})})}}insertLinesInRows(chart){chart.selectAll("g.row").each(function(){const row=d3_src.Ltv(this);row.select(".hline").remove(),row.insert("g").attr("class","hline").insert("line")})}insertTextsInRows(chart,textClass){chart.selectAll("g.row").each(function(){const row=d3_src.Ltv(this);row.select("."+textClass).remove(),row.insert("g").attr("class",textClass||"confidence-text").insert("text")})}drawLines(chart,yPos){const self=this;chart.selectAll("g.axis g.tick").each(function(){const el=d3_src.Ltv(this);parseFloat(el.select("text").text())?el.select(".grid-line").style("opacity",0):el.select(".grid-line").style("stroke","#BCC0CA").style("stroke-width","2px").style("opacity",1)}),chart.selectAll("g.row g.hline line").attr("stroke-width",1.5).attr("stroke",()=>self.colors[0]).attr("x1",d=>{const data=self._data.find(g=>d.key[0]===g.tissue);if(data){const val=chart.x()(data.ci_l);return isNaN(val)?0:val}return 0}).attr("y1",()=>yPos).attr("x2",d=>{const data=self._data.find(g=>d.key[0]===g.tissue);if(data){const val=chart.x()(data.ci_r);return isNaN(val)?0:val}return 0}).attr("y2",()=>yPos)}renderConfidenceTexts(chart,yPos,lineWidth,isNeg){const self=this,queryString="g.row g.confidence-text"+(isNeg?"-left":"-right")+" text";chart.group(self.group),chart.selectAll(queryString).attr("x",d=>{const data=self._data.find(g=>d.key[0]===g.tissue);let scaledX=0,ciValue=0,dotPixels=0;data&&data.ci_l&&data.ci_r?(dotPixels=-1!==data.ci_l.toPrecision(2).indexOf(".")?.5:0,ciValue=isNeg?data.ci_l:data.ci_r,scaledX=chart.x()(ciValue)):(dotPixels=.5,ciValue=d.value.logfc,scaledX=chart.x()(d.value.logfc)-lineWidth/2);let val=0;return ciValue&&(val=isNeg?scaledX-(5*ciValue.toPrecision(2).length+dotPixels):scaledX+(5*ciValue.toPrecision(2).length+dotPixels)),isNaN(val)?0:val}).attr("y",()=>yPos+5).attr("text-anchor","middle").text(d=>{const data=self._data.find(g=>d.key[0]===g.tissue);let ciValue="0.0";return data&&(ciValue=isNeg?data.ci_l.toPrecision(2):data.ci_r.toPrecision(2)),ciValue})}compareAttributeValue(cValue,gValue){return this.helperService.getSignificantFigures(cValue)===gValue}rectToCircles(chart,squareSize,rectHeight){const self=this;chart.selectAll("g.row rect").each(function(){const circle=d3_src.Ltv(this),tooltip=self.getTooltip("internal","chart-value-tooltip row-chart-value-tooltip");circle.attr("transform",function(d){return"translate("+(isNaN(chart.x()(+d.value.logfc)-squareSize/2)?0:chart.x()(+d.value.logfc)-squareSize/2)+","+(rectHeight/2-squareSize/2)+")"}).attr("width",squareSize).attr("height",squareSize).attr("rx",squareSize/2).attr("ry",squareSize/2),circle.on("mouseover",function(event,d){const offset=self.helperService.getOffset(this),text=`Log Fold Change: ${self.helperService.getSignificantFigures(+d.value.logfc,3)}`;tooltip.style("left",(offset?.left||0)+"px").style("top",(offset?.top+15||0)+"px").html(text),self.showTooltip("internal")}).on("mouseout",function(){self.hideTooltip("internal")}).on("click",()=>{})})}displayChart(){return{opacity:1}}onResize(){if(!this.chart)return;const self=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{self.chart.width(self.chartContainer.nativeElement.parentElement.offsetWidth-100).height(self.chartContainer.nativeElement.offsetHeight),self.chart.rescale&&self.chart.rescale(),self.chart.redraw()},100)}static propDecorators={data:[{type:debug_node.pde}],xAxisLabel:[{type:debug_node.pde}],paddingLR:[{type:debug_node.pde}],paddingUD:[{type:debug_node.pde}],leftAxis:[{type:core.ViewChild,args:["leftAxis",{static:!0}]}]}};RowChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-row-chart",standalone:!0,template:'<div class="chart row-chart" (window:resize)="onResize()">\n  <div class="chart-inner">\n    @if (heading) {\n      <h4 class="chart-heading">{{ heading }}</h4>\n    }\n    <div class="chart-body">\n      <div #leftAxis class="chart-axis"></div>\n      <div #chartContainer class="chart-container"></div>\n    </div>\n    @if (xAxisLabel) {\n      <div class="chart-x-axis-label">{{ xAxisLabel }}</div>\n    }\n    @if (!this._data.length) {\n      <div class="chart-no-data">\n        <div class="chart-no-data-text">No data is currently available.</div>\n      </div>\n    }\n  </div>\n</div>\n',styles:[row_chart_componentngResource_default()]})],RowChartComponent);var score_barchart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/score-barchart/score-barchart.component.scss?ngResource"),score_barchart_componentngResource_default=__webpack_require__.n(score_barchart_componentngResource);let ScoreBarChartComponent=class ScoreBarChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);_score=null;get score(){return this._score}set score(score){this._score=score}shouldResize=!0;barColor="#8B8AD1";data;xAxisLabel="Gene score";yAxisLabel="Number of genes";scoreBarChartContainer={};chartRef={};tooltip={};initialized=!1;MIN_CHART_WIDTH=350;CHART_HEIGHT=350;chart;chartMargin={top:20,right:20,bottom:40,left:60};chartXScale;chartNegativeBars;chartScoreBars;chartBarLabels;chartXAxisDrawn;chartXAxisLabel;resizeTimer=0;chartData=[];scoreIndex=-1;onResize(){if(this.shouldResize&&this.initialized){const divSize=this.scoreBarChartContainer.nativeElement.getBoundingClientRect().width;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.resizeChart(divSize)},100)}}ngOnChanges(changes){(changes.data&&!changes.data.firstChange||changes.score&&!changes.score.firstChange||changes.barColor&&!changes.barColor.firstChange)&&(null===this.score?(this.clearChart(),this.hideChart()):(this.clearChart(),this.showChart(),this.createChart()))}ngAfterViewInit(){null===this.score?this.hideChart():this.createChart()}ngOnDestroy(){this.destroyChart()}setScoreIndex(bins){bins.forEach((item,index)=>{null!==this._score&&(this._score>=item[0]&&this._score<item[1]&&(this.scoreIndex=index),index===bins.length-1&&this._score===item[1]&&(this.scoreIndex=index))})}initData(){this.data&&(this.chartData=[],this.setScoreIndex(this.data.bins),this.data.distribution.forEach((item,index)=>{this.chartData.push({distribution:item,bins:this.data?.bins[index]})}))}clearChart(){d3_src.Ltv(this.chartRef.nativeElement).selectAll("*").remove()}hideChart(){d3_src.Ltv(this.chartRef.nativeElement).style("display","none")}showChart(){d3_src.Ltv(this.chartRef.nativeElement).style("display","block")}getChartBoundingWidth(){return d3_src.Ltv(this.chartRef.nativeElement).node()?.getBoundingClientRect().width||this.MIN_CHART_WIDTH}createChart(){if(this.initData(),this.chartData){const width=this.getChartBoundingWidth(),height=this.CHART_HEIGHT,innerWidth=width-this.chartMargin.left-this.chartMargin.right,innerHeight=height-this.chartMargin.top-this.chartMargin.bottom,svg=this.chart=d3_src.Ltv(this.chartRef.nativeElement).attr("width",width).attr("height",height).append("g").attr("transform",`translate(${this.chartMargin.left}, ${this.chartMargin.top})`);this.chartXScale=d3_src.WH().domain(this.chartData.map(d=>d.bins[0].toString())).range([0,innerWidth]).padding(.2);const yScale=d3_src.m4Y().domain([0,d3_src.T9B(this.chartData,d=>d.distribution)]).range([innerHeight,0]);this.chartNegativeBars=svg.selectAll(".negative-bars").data(this.chartData).enter().append("rect").attr("class","negative-bars").attr("x",d=>this.chartXScale(d.bins[0].toString())).attr("y",0).attr("width",this.chartXScale.bandwidth()).attr("height",d=>yScale(d.distribution)).attr("fill","transparent").on("mouseenter",(event,d)=>{const index=svg.selectAll(".negative-bars").nodes().indexOf(event.target),tooltipText=this.getToolTipText(d.bins[0],d.bins[1],d.distribution),tooltipCoordinates=this.getTooltipCoordinates(this.chartMargin.left,this.chartMargin.top,this.chartXScale(d.bins[0].toString()),this.chartXScale.bandwidth(),yScale(d.distribution)),bar=d3_src.Ltv(this.chartScoreBars.nodes()[index]);this.handleMouseEnter(bar,index,tooltipText,tooltipCoordinates)}).on("mouseleave",event=>{const index=svg.selectAll(".negative-bars").nodes().indexOf(event.target),bar=d3_src.Ltv(this.chartScoreBars.nodes()[index]);this.handleMouseLeave(bar,index)}),this.chartScoreBars=svg.selectAll(".scorebars").data(this.chartData).enter().append("rect").attr("class","scorebars").attr("x",d=>this.chartXScale(d.bins[0].toString())).attr("y",d=>yScale(d.distribution)).attr("width",this.chartXScale.bandwidth()).attr("height",d=>innerHeight-yScale(d.distribution)).attr("fill",this.barColor).style("fill-opacity",(_,index)=>this.scoreIndex===index?"100%":"50%").on("mouseenter",(event,d)=>{const index=svg.selectAll(".scorebars").nodes().indexOf(event.target),tooltipText=this.getToolTipText(d.bins[0],d.bins[1],d.distribution),tooltipCoordinates=this.getTooltipCoordinates(this.chartMargin.left,this.chartMargin.top,this.chartXScale(d.bins[0].toString()),this.chartXScale.bandwidth(),yScale(d.distribution)),bar=d3_src.Ltv(this.chartScoreBars.nodes()[index]);this.handleMouseEnter(bar,index,tooltipText,tooltipCoordinates)}).on("mouseleave",event=>{const index=svg.selectAll(".scorebars").nodes().indexOf(event.target),bar=d3_src.Ltv(this.chartScoreBars.nodes()[index]);this.handleMouseLeave(bar,index)}),this.chartBarLabels=svg.selectAll(".bar-labels").data(this.chartData).enter().append("text").attr("class","bar-labels").attr("x",d=>this.chartXScale(d.bins[0].toString())+this.chartXScale.bandwidth()/2).attr("y",d=>yScale(d.distribution)-5).attr("fill",this.barColor).attr("text-anchor","middle").attr("font-size","12px").style("font-weight",(_,index)=>this.scoreIndex===index?"bold":"normal").text((_,index)=>this.scoreIndex==index?this.helperService.roundNumber(this.score,2):"").on("mouseenter",(_,d)=>{const index=this.scoreIndex,tooltipText=this.getToolTipText(d.bins[0],d.bins[1],d.distribution),tooltipCoordinates=this.getTooltipCoordinates(this.chartMargin.left,this.chartMargin.top,this.chartXScale(d.bins[0].toString()),this.chartXScale.bandwidth(),yScale(d.distribution)),bar=d3_src.Ltv(this.chartScoreBars.nodes()[index]);this.handleMouseEnter(bar,index,tooltipText,tooltipCoordinates)}).on("mouseleave",()=>{const index=this.scoreIndex,bar=d3_src.Ltv(this.chartScoreBars.nodes()[index]);this.handleMouseLeave(bar,index)});const xAxis=d3_src.l78(this.chartXScale);this.chartXAxisDrawn=svg.append("g").attr("class","x-axis").attr("transform",`translate(0, ${innerHeight})`).call(xAxis);const yAxis=d3_src.V4s(yScale);svg.append("g").attr("class","y-axis").call(yAxis),this.chartXAxisLabel=svg.append("text").attr("class","x-axis-label").attr("x",innerWidth/2).attr("y",innerHeight+this.chartMargin.bottom).attr("text-anchor","middle").text("GENE SCORE"),svg.append("text").attr("class","y-axis-label").attr("x",-innerHeight/2).attr("y",-this.chartMargin.left).attr("dy","1em").attr("text-anchor","middle").attr("transform","rotate(-90)").text("NUMBER OF GENES"),this.initialized=!0}}handleMouseEnter(bar,index,tooltipText,tooltipCoordinates){this.highlightBar(bar,index),this.showTooltip(tooltipText,tooltipCoordinates.X,tooltipCoordinates.Y,index)}handleMouseLeave(bar,index){this.unhighlightBar(bar,index),this.hideTooltip()}highlightBar(bar,index){index===this.scoreIndex?bar.style("fill-opacity","80%"):bar.style("fill-opacity","100%")}unhighlightBar(bar,index){index===this.scoreIndex?bar.style("fill-opacity","100%"):bar.style("fill-opacity","50%")}getTooltipCoordinates(leftMargin,topMargin,xBarPosition,xBarWidth,yBarPosition){return{X:leftMargin+xBarPosition+xBarWidth/2,Y:topMargin+yBarPosition}}getToolTipText(scoreRangeStart,scoreRangeEnd,geneCount){return`Score Range: ${0==this.scoreIndex?"[":"("}${scoreRangeStart}, ${scoreRangeEnd}]\n    <br>\n    Gene Count: ${geneCount}`}showTooltip(text,x,y,index){const tooltipElement=this.tooltip.nativeElement;tooltipElement.innerHTML=text,tooltipElement.style.left=`${x}px`,index===this.scoreIndex&&(y-=14),tooltipElement.style.top=`${y}px`,tooltipElement.style.display="block"}hideTooltip(){const tooltipElement=this.tooltip.nativeElement;"block"===tooltipElement.style.display&&(tooltipElement.style.display="none")}destroyChart(){this.initialized&&this.chart.remove()}resizeChart=divSize=>{const width=Math.max(divSize,this.MIN_CHART_WIDTH),innerWidth=width-this.chartMargin.left-this.chartMargin.right;this.chart.attr("width",width),this.chartXScale.range([0,innerWidth]),this.chartNegativeBars.transition().attr("x",d=>this.chartXScale(d.bins[0].toString())),this.chartScoreBars.transition().attr("x",d=>this.chartXScale(d.bins[0].toString())).attr("width",this.chartXScale.bandwidth()),this.chartBarLabels.transition().attr("x",d=>this.chartXScale(d.bins[0].toString())+this.chartXScale.bandwidth()/2).attr("width",this.chartXScale.bandwidth());const xAxis=d3_src.l78(this.chartXScale);this.chartXAxisDrawn.transition().call(xAxis),this.chartXAxisLabel.transition().attr("x",innerWidth/2)};static propDecorators={score:[{type:debug_node.pde}],shouldResize:[{type:debug_node.pde}],barColor:[{type:debug_node.pde}],data:[{type:debug_node.pde}],xAxisLabel:[{type:debug_node.pde}],yAxisLabel:[{type:debug_node.pde}],scoreBarChartContainer:[{type:core.ViewChild,args:["scoreBarChartContainer"]}],chartRef:[{type:core.ViewChild,args:["chart"]}],tooltip:[{type:core.ViewChild,args:["tooltip",{static:!0}]}],onResize:[{type:debug_node.Z$l,args:["window:resize",["$event.target"]]}]}};ScoreBarChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-score-barchart",imports:[],template:'<div id="score-barchart" class="chart-d3" #scoreBarChartContainer>\n  <div id="tooltip" class="arrow-below tooltip-arrow" #tooltip (mouseout)="hideTooltip()"></div>\n  <svg #chart></svg>\n  @if (_score === null) {\n    <div class="chart-no-data">\n      <div class="chart-no-data-text">No data is currently available.</div>\n    </div>\n  }\n</div>\n',encapsulation:debug_node.gXe.None,styles:[score_barchart_componentngResource_default()]})],ScoreBarChartComponent);var score_chart_componentngResource=__webpack_require__("./libs/agora/charts/src/lib/score-chart/score-chart.component.scss?ngResource"),score_chart_componentngResource_default=__webpack_require__.n(score_chart_componentngResource);let ScoreChartComponent=class ScoreChartComponent extends BaseChartComponent{helperService=(0,root_effect_scheduler.WQX)(src.wT);_score=null;get score(){return this._score}set score(score){this._score=score,this.init()}barColor="#8b8ad1";distribution=[];xAxisLabel="Gene score";yAxisLabel="Number of genes";name="score-chart";dimension;group;scoreIndex=-1;break={};init(){this.distribution?.length&&this.chartContainer?.nativeElement&&(this.initData(),this.initChart(),this.chart.render(),this.isInitialized=!0)}initData(){this.distribution.forEach((item,i)=>{if(null!==this._score){this._score>=item.range[0]&&this._score<item.range[1]&&(this.scoreIndex=i);const minDiff=this.getMinDiff(item.value,this.distribution);minDiff>2e3&&(this.break={index:i,upper:1e3*Math.floor(item.value/1e3),lower:1e3*Math.ceil((item.value-minDiff)/1e3)+1e3},this.distribution[i].truncated=this.break.lower+(item.value-this.break.upper))}});const ndx=(0,main.A)(this.distribution);this.dimension=ndx.dimension(d=>d.key),this.group=this.dimension.group().reduceSum(d=>d.truncated||d.value)}getMinDiff(value,distribution){const arr=distribution.map(d=>value-d.value).filter(v=>v>0),min=Math.min(...arr);return min===1/0?0:min}initChart(){const max=d3_src.T9B(this.distribution.map(d=>d.truncated||d.value)),yTickCount=Math.ceil(max/1e3);this.chart=dc.barChart(this.chartContainer.nativeElement).dimension(this.dimension).group(this.group).brushOn(!1),this.chart.x(d3_src.WH()).xAxisLabel(this.xAxisLabel).xUnits(dc.units.ordinal).xAxis().ticks(2).tickFormat(d3_src.GPZ("d")),this.chart.y(d3_src.m4Y().domain([0,this.group.top(1)[0].value])).yAxisLabel(this.yAxisLabel).yAxis().ticks(yTickCount).tickFormat(v=>d3_src.GPZ(".1s")(v==this.break?.lower?this.break.upper:v)),this.chart.colors([this.barColor]),this.chart.margins({left:50,right:0,bottom:50,top:0}).barPadding(.2),this.chart.renderTitle(!1).renderHorizontalGridLines(!0),this.chart.on("renderlet",chart=>{chart.selectAll("rect").each((d,i,bars)=>{const barBox=bars[i].getBBox();if(i==this.scoreIndex){bars[i].classList.add("score-bar");const label=chart.select("g.chart-body").append("text");label.attr("x",barBox.x).attr("y",barBox.y-6).attr("font-size","12px").attr("fill",this.barColor),null!==this._score&&label.text(this.helperService.roundNumber(this._score,2));const widthDiff=label.node().getBBox().width-barBox.width;label.attr("x",barBox.x-(widthDiff>0?widthDiff:-1*widthDiff)/2)}if(i==this.break.index){const topLine=chart.select(".grid-line line:last-child").node(),bottomLine=topLine.previousSibling,topY=topLine.getBBox().y,bottomY=bottomLine.getBBox().y,y=bottomY-(topY-bottomY-14)/2*-1,breakContainer=chart.select(".chart-body").append("g").attr("class","chart-break").style("transform",`translate(${barBox.x-4}px, ${y}px) skew(0, -15deg)`);breakContainer.append("rect").attr("width",barBox.width+8).attr("height",14).attr("fill",this.barColor),breakContainer.append("rect").attr("width",barBox.width+10).attr("height",10).attr("x",-1).attr("y",2).attr("fill","#fff")}this.addTooltip(bars[i],i)})}),this.chart.filter=()=>""}addTooltip(bar,i){const self=this,tooltip=this.getTooltip("internal","score-chart-tooltip",!0),distribution=this.distribution[i],leftBoundCharacter=0==i?"[":"(";d3_src.Ltv(bar).on("mouseover",function(){const barBox=bar.getBoundingClientRect(),lowerRange=parseFloat(distribution.range[0]).toFixed(2),upperRange=parseFloat(distribution.range[1]).toFixed(2),text=`Score Range: ${leftBoundCharacter} ${lowerRange}, ${upperRange}]\n          <br>\n          Gene Count: ${distribution.value}`;tooltip.html(text).style("top",window.pageYOffset+barBox.top-40+"px").style("left",barBox.left+barBox.width-20+"px"),self.showTooltip("internal")}).on("mouseout",function(){self.hideTooltip("internal")})}static propDecorators={score:[{type:debug_node.pde}],barColor:[{type:debug_node.pde}],distribution:[{type:debug_node.pde}],xAxisLabel:[{type:debug_node.pde}],yAxisLabel:[{type:debug_node.pde}]}};ScoreChartComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-score-chart",standalone:!0,template:'<div class="chart score-chart" (window:resize)="onResize()">\n  <div class="chart-inner">\n    @if (heading) {\n      <h4 class="chart-heading">{{ heading }}</h4>\n    }\n    <div class="chart-body">\n      <div #chartContainer class="chart-container"></div>\n    </div>\n    @if (_score === null) {\n      <div class="chart-no-data">\n        <div class="chart-no-data-text">No data is currently available.</div>\n      </div>\n    }\n  </div>\n</div>\n',styles:[score_chart_componentngResource_default()]})],ScoreChartComponent)},"./libs/agora/charts/src/lib/base-chart/base-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/biodomains-chart/biodomains-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,'#biodomains-chart {\n  position: relative;\n  width: 500px;\n  height: 560px;\n}\n#biodomains-chart #biodomains-chart-tooltip {\n  position: absolute;\n  text-align: center;\n  padding: 5px;\n  font-size: 14px;\n  background-color: #63676c;\n  color: white;\n  display: none;\n  z-index: 200;\n  opacity: 0.9;\n  width: 200px;\n  cursor: pointer;\n  border-radius: 5px;\n}\n#biodomains-chart .tooltip-arrow::before {\n  content: "";\n  position: absolute;\n  left: 50%;\n  border: 10px solid transparent;\n  transform: translateX(-50%);\n}\n#biodomains-chart .tooltip-arrow.arrow-below {\n  transform: translate(-50%, calc(-100% - 20px));\n}\n#biodomains-chart .tooltip-arrow.arrow-below::before {\n  bottom: -9px;\n  border-bottom: 0;\n  border-top-color: #63676c;\n}\n#biodomains-chart .negative-bars:hover {\n  fill: transparent;\n  cursor: pointer;\n}\n#biodomains-chart .bars:hover {\n  cursor: pointer;\n}\n#biodomains-chart .bar-labels:hover {\n  cursor: pointer;\n}\n#biodomains-chart .bar-values {\n  pointer-events: none;\n}\n#biodomains-chart .bar-values:hover {\n  cursor: pointer;\n}',""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/candlestick-chart/candlestick-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".chart-container {\n  height: 450px;\n}\n\ncandlestick-chart {\n  display: block;\n  margin-top: 60px;\n}\ncandlestick-chart .rc .cc svg g.axis {\n  fill: none;\n}\n\n.rna-seq-candlestick .rc-empty-plot-content {\n  height: 450px;\n  position: relative;\n  display: block;\n  background: rgba(245, 245, 245, 0.5);\n}\n\n.candlestick-plot-xaxis-tooltip {\n  background: #fff;\n  border-radius: 2px;\n  color: #000;\n  position: absolute;\n  padding: 14px;\n  text-align: center;\n  line-height: normal;\n  border: 0;\n  box-shadow: 0 0 4px #c7c5c5;\n}\n\n.candlestick-plot-tooltip {\n  background: #2f8e94;\n  border-radius: 8px;\n  color: #fff;\n  pointer-events: none;\n  position: absolute;\n  padding: 14px;\n  text-align: center;\n  line-height: normal;\n  border: 0;\n  box-shadow: 0 0 4px #c7c5c5;\n}\n\n@media (min-width >= 576px) {\n  candlestick-chart .rc {\n    flex: 0 0 100%;\n    max-width: 100%;\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/median-barchart/median-barchart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"#median-barchart .x-axis-label,\n#median-barchart .y-axis-label {\n  font-size: var(--font-size-lg);\n  font-weight: 700;\n  color: var(--color-chart-axis-label);\n  fill: var(--color-chart-axis-label);\n}\n#median-barchart .y-axis .tick text {\n  font-size: var(--font-size-sm);\n}\n#median-barchart .x-axis .tick text {\n  font-size: var(--font-size-md);\n  font-weight: 700;\n}\n#median-barchart .bar-labels {\n  font-size: var(--font-size-sm);\n  text-anchor: middle;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/median-chart/median-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/network-chart/network-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/row-chart/row-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/score-barchart/score-barchart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"#score-barchart .negative-bars:hover {\n  fill: transparent;\n  cursor: pointer;\n}\n#score-barchart .scorebars:hover {\n  cursor: pointer;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/charts/src/lib/score-chart/score-chart.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/genes/src/lib/components/gene-biodomains/gene-biodomains.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/.pnpm/css-loader@7.1.2_@rspack+core@1.5.0_@swc+helpers@0.5.17__webpack@5.101.2_@swc+core@1.5._c4fd534e7bd00249f2087646541cdc25/node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"h3 {\n  font-size: 16px;\n  font-weight: bold;\n}\n\n#container #biodomain-panes {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  height: 683px;\n}\n#container #biodomain-panes #left-hand-pane {\n  border-width: 1px 0 1px 1px;\n  border-color: #f1f3f5;\n  border-style: solid;\n  padding: 36px;\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n}\n#container #biodomain-panes #right-hand-pane {\n  width: 525px;\n  background-color: #f1f3f5;\n  padding: 0 36px 36px;\n  overflow: auto;\n  position: relative;\n}\n#container #biodomain-panes #right-hand-pane h3 {\n  padding-top: 36px;\n  background-color: #f1f3f5;\n  position: sticky;\n  top: 0;\n}\n#container #biodomain-panes #right-hand-pane #notch {\n  position: absolute;\n  left: 0;\n  top: 40px;\n  width: 0;\n  height: 0;\n  border-top: 20px solid transparent;\n  border-bottom: 20px solid transparent;\n  border-left: 20px solid white;\n}\n#container #biodomain-panes #right-hand-pane ul {\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n}\n#container #biodomain-panes #right-hand-pane ul li {\n  padding: 0 0 15px;\n  font-size: 14px;\n}\n#container .no-data {\n  background-color: #f1f3f5;\n  padding: 30px;\n}\n#container .no-data a {\n  color: var(--color-action-primary);\n  font-size: 16px;\n}\n\n/* WebKit-based browsers (Chrome, Safari) */\n::-webkit-scrollbar {\n  width: 6px;\n}\n\n::-webkit-scrollbar-track {\n  background-color: transparent; /* Hide the track */\n}\n\n::-webkit-scrollbar-thumb {\n  background-color: #878e95;\n  border-radius: 5px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background-color: #4a5056;\n}\n\n/* Firefox */\n@supports (scrollbar-color: #878e95 transparent) {\n  * {\n    scrollbar-color: #878e95 transparent;\n    scrollbar-width: thin;\n  }\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./libs/agora/genes/src/lib/components/gene-biodomains/gene-biodomains.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>GeneBioDomainsComponent});var tslib_es6=__webpack_require__("./node_modules/.pnpm/tslib@2.4.1/node_modules/tslib/tslib.es6.js");var gene_biodomains_componentngResource=__webpack_require__("./libs/agora/genes/src/lib/components/gene-biodomains/gene-biodomains.component.scss?ngResource"),gene_biodomains_componentngResource_default=__webpack_require__.n(gene_biodomains_componentngResource),root_effect_scheduler=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/root_effect_scheduler.mjs"),debug_node=__webpack_require__("./node_modules/.pnpm/@angular+core@20.3.1_@angular+compiler@20.3.1_rxjs@7.8.1_zone.js@0.15.0/node_modules/@angular/core/fesm2022/debug_node.mjs"),src=__webpack_require__("./libs/agora/charts/src/index.ts"),services_src=__webpack_require__("./libs/agora/services/src/index.ts");let GeneBioDomainsComponent=class GeneBioDomainsComponent{helperService=(0,root_effect_scheduler.WQX)(services_src.wT);gene;selectedBioDomain;goTerms=[];defaultBioDomains=["Apoptosis","APP Metabolism","Autophagy","Cell Cycle","DNA Repair","Endolysosome","Epigenetic","Immune Response","Lipid Metabolism","Metal Binding and Homeostasis","Mitochondrial Metabolism","Myelination","Oxidative Stress","Proteostasis","RNA Spliceosome","Structural Stabilization","Synapse","Tau Homeostasis","Vasculature"];ngOnInit(){this.processBioDomains()}getGeneName(){return this.gene?this.gene.hgnc_symbol||this.gene.ensembl_gene_id:""}getGoTerms(index){if(this.gene&&this.gene.bio_domains){return this.gene.bio_domains.gene_biodomains[index].go_terms.sort((a,b)=>a.localeCompare(b))}return[]}onSelectedBioDomain(index){if(void 0===index)return this.goTerms=[],void(this.selectedBioDomain=void 0);this.goTerms=this.getGoTerms(index),this.selectedBioDomain=this.gene?.bio_domains?.gene_biodomains[index]}processBioDomains(){this.defaultBioDomains.forEach(d=>{const exists=this.gene?.bio_domains?.gene_biodomains.find(b=>b.biodomain===d);exists||this.gene?.bio_domains?.gene_biodomains.push({biodomain:d,go_terms:[],n_biodomain_terms:0,n_gene_biodomain_terms:0,pct_linking_terms:0})}),this.gene?.bio_domains?.gene_biodomains.sort((a,b)=>a.pct_linking_terms!==b.pct_linking_terms?b.pct_linking_terms-a.pct_linking_terms:a.biodomain.localeCompare(b.biodomain))}getHeaderText(){const baseText=`LINKING GO TERMS FOR ${this.selectedBioDomain?.biodomain.toUpperCase()}`;return 0===this.goTerms.length?`NO ${baseText}`:`${baseText} (${this.selectedBioDomain?.n_gene_biodomain_terms}/${this.selectedBioDomain?.n_biodomain_terms})`}capitalizeGoTerm(goTerm){return this.helperService.capitalizeFirstLetterOfString(goTerm)}static propDecorators={gene:[{type:debug_node.pde}]}};GeneBioDomainsComponent=(0,tslib_es6.Cg)([(0,debug_node.uAl)({selector:"agora-gene-biodomains",imports:[src.J2],template:'<div id="container">\n  @if (gene?.bio_domains?.gene_biodomains) {\n    <div id="biodomain-panes">\n      <div id="left-hand-pane">\n        <h3>BIOLOGICAL DOMAIN MAPPINGS</h3>\n        <agora-biodomains-chart\n          [data]="gene?.bio_domains?.gene_biodomains"\n          [geneName]="getGeneName()"\n          (selectedBioDomainIndex)="onSelectedBioDomain($event)"\n        ></agora-biodomains-chart>\n      </div>\n      <div id="right-hand-pane">\n        <div id="notch"></div>\n        <h3>{{ getHeaderText() }}</h3>\n        <ul>\n          @for (goTerm of goTerms; track goTerm) {\n            <li>\n              {{ capitalizeGoTerm(goTerm) }}\n            </li>\n          }\n        </ul>\n      </div>\n    </div>\n  } @else {\n    <div class="section">\n      <div class="section-inner">\n        <div class="container-sm">\n          <div class="no-data">\n            There are no biological domain mappings for this gene. To contribute evidence towards\n            defining new AD biological domains, contact us\n            <a href="mailto:agora@sagebionetworks.org">here</a>.\n          </div>\n        </div>\n      </div>\n    </div>\n  }\n</div>\n',styles:[gene_biodomains_componentngResource_default()]})],GeneBioDomainsComponent)}}]);