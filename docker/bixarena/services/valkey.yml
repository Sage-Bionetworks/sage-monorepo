services:
  bixarena-valkey:
    image: ghcr.io/sage-bionetworks/bixarena-valkey:${BIXARENA_VERSION:-local}
    container_name: bixarena-valkey
    restart: always
    env_file:
      - ../../../apps/bixarena/valkey/.env
    networks:
      - bixarena
    ports:
      - '8116:8116'
    deploy:
      resources:
        limits:
          memory: 500M
    healthcheck:
      test: ['CMD', 'valkey-cli', '-p', '8116', 'ping']
      interval: 5s
      timeout: 3s
      retries: 5
      start_period: 5s
