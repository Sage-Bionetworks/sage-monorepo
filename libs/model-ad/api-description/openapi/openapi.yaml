openapi: 3.0.3
info:
  version: 1.0.0
  title: Model-AD API
  license:
    name: Apache 2.0
    url: https://github.com/Sage-Bionetworks/sage-monorepo/blob/main/LICENSE.txt
  contact:
    name: Support
    url: https://github.com/Sage-Bionetworks/sage-monorepo
  x-logo:
    url: https://dev.modeladexplorer.org/opengraph/opengraph.png
    altText: Model-AD Explorer
servers:
  - url: http://localhost/v1
tags:
  - name: Model Overview
    description: Operations about Model Overview.
    x-displayName: Model Overview
  - name: Disease Correlation
    description: Operations about Disease Correlation results.
    x-displayName: Disease Correlation
  - name: Gene Expression
    description: Operations about Gene Expression results.
    x-displayName: Gene Expression
  - name: Data Version
    description: Operations about the data version.
    x-displayName: Data Version
  - name: Model
    description: Operations about models.
    x-displayName: Model
  - name: Comparison Tool Config
    description: Operations about Comparison Tool UI configuration.
    x-displayName: Comparison Tool Config
paths:
  /comparison-tools/model-overview:
    get:
      tags:
        - Model Overview
      summary: Get model overview for comparison tools
      description: Returns a paginated list of model overview objects for use in comparison tools.
      operationId: getModelOverviews
      parameters:
        - $ref: '#/components/parameters/modelOverviewSearchQuery'
      responses:
        '200':
          description: A paginated list of model overview objects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelOverviewsPage'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /comparison-tools/disease-correlation:
    get:
      tags:
        - Disease Correlation
      summary: Get disease correlation comparison data
      description: Returns a paginated list of disease correlation objects for use in comparison tools.
      operationId: getDiseaseCorrelations
      parameters:
        - $ref: '#/components/parameters/diseaseCorrelationSearchQuery'
      responses:
        '200':
          description: A paginated response containing disease correlation objects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiseaseCorrelationsPage'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /comparison-tools/gene-expression:
    get:
      tags:
        - Gene Expression
      summary: Get gene expression comparison data
      description: Returns a list of gene expression objects for use in comparison tools.
      operationId: getGeneExpressions
      parameters:
        - $ref: '#/components/parameters/categoryQuery'
        - $ref: '#/components/parameters/itemQuery'
        - $ref: '#/components/parameters/itemFilterTypeQuery'
      responses:
        '200':
          description: A list of gene expression objects
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GeneExpression'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /data-version:
    get:
      tags:
        - Data Version
      summary: Get data version
      description: Get data version
      operationId: getDataVersion
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DataVersion'
          description: Success
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /models/search:
    get:
      tags:
        - Model
      summary: Search Models
      description: Search for a particular model
      operationId: searchModels
      parameters:
        - name: q
          in: query
          description: Search query
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SearchResult'
          description: Successfully retrieved search results
        '400':
          $ref: '#/components/responses/BadRequest'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /models/{name}:
    get:
      tags:
        - Model
      summary: Get details for a specific model
      description: Retrieve detailed information for a specific model by its name
      operationId: getModelByName
      parameters:
        - name: name
          in: path
          description: Name of the model to retrieve
          required: true
          schema:
            type: string
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Model'
          description: Successfully retrieved model details
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
  /comparison-tool-config:
    get:
      tags:
        - Comparison Tool Config
      summary: Get Comparison Tool configuration
      description: Retrieve the Comparison Tool configuration schema for the Model-AD application
      operationId: getComparisonToolConfig
      parameters:
        - name: page
          in: query
          description: Name of the page to retrieve the Comparison Tool configuration for
          required: true
          schema:
            $ref: '#/components/schemas/ComparisonToolPage'
      responses:
        '200':
          description: Successfully retrieved Comparison Tool configuration
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ComparisonToolConfig'
        '400':
          $ref: '#/components/responses/BadRequest'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/InternalServerError'
components:
  schemas:
    ItemFilterTypeQuery:
      type: string
      enum:
        - include
        - exclude
      description: |
        - include: Include only the specified items.
        - exclude: Exclude the specified items.
      default: include
    ModelOverviewSearchQuery:
      type: object
      description: Model overview search query with pagination and filtering options.
      properties:
        pageNumber:
          description: The page number to return (index starts from 0).
          type: integer
          format: int32
          default: 0
          minimum: 0
          example: 0
        pageSize:
          description: The number of items in a single page.
          type: integer
          format: int32
          default: 100
          minimum: 1
          maximum: 100
          example: 100
        items:
          description: List of item IDs to filter by.
          type: array
          items:
            type: string
          nullable: true
          example:
            - 507f1f77bcf86cd799439011
            - 507f191e810c19729de860ea
        itemFilterType:
          $ref: '#/components/schemas/ItemFilterTypeQuery'
          nullable: true
      required: []
    ModelOverviewLink:
      type: object
      description: Model Overview Link
      properties:
        link_text:
          type: string
          description: Link text
        link_url:
          type: string
          description: URL for the related resource
    ModelOverview:
      type: object
      description: Model Overview object for comparison tools
      properties:
        _id:
          type: string
          description: Unique identifier for the model overview object
        name:
          type: string
          description: Model name
        model_type:
          type: string
          description: Model type (e.g., Late Onset AD, Familial AD)
        matched_controls:
          type: array
          items:
            type: string
          description: List of matched control models
        gene_expression:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        disease_correlation:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        biomarkers:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        pathology:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        study_data:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        jax_strain:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        center:
          $ref: '#/components/schemas/ModelOverviewLink'
          nullable: true
        modified_genes:
          type: array
          items:
            type: string
          description: List of modified genes in the model
        available_data:
          type: array
          items:
            type: string
            enum:
              - Gene Expression
              - Pathology
              - Biomarkers
              - Disease Correlation
      required:
        - _id
        - name
        - model_type
        - matched_controls
        - study_data
        - jax_strain
        - center
        - modified_genes
        - available_data
    PageMetadata:
      type: object
      description: The metadata of a page.
      properties:
        number:
          type: integer
          description: The page number.
          example: 0
        size:
          type: integer
          description: The number of items in a single page.
          example: 100
        totalElements:
          type: integer
          format: int64
          description: Total number of elements in the result set.
          example: 250
        totalPages:
          type: integer
          description: Total number of pages in the result set.
          example: 3
        hasNext:
          type: boolean
          description: Returns if there is a next page.
          example: true
        hasPrevious:
          type: boolean
          description: Returns if there is a previous page.
          example: false
      required:
        - number
        - size
        - totalElements
        - totalPages
        - hasNext
        - hasPrevious
    ModelOverviewsPage:
      type: object
      description: A page of model overview objects.
      properties:
        modelOverviews:
          type: array
          description: List of model overviews in this page.
          items:
            $ref: '#/components/schemas/ModelOverview'
        page:
          $ref: '#/components/schemas/PageMetadata'
      required:
        - modelOverviews
        - page
    BasicError:
      type: object
      description: Problem details (tools.ietf.org/html/rfc7807)
      properties:
        title:
          type: string
          description: A human readable documentation for the problem type
        status:
          type: integer
          description: The HTTP status code
        detail:
          type: string
          description: A human readable explanation specific to this occurrence of the problem
        type:
          type: string
          description: An absolute URI that identifies the problem type
        instance:
          type: string
          description: An absolute URI that identifies the specific occurrence of the problem
      required:
        - title
        - status
    DiseaseCorrelationSearchQuery:
      type: object
      description: Disease correlation search query with pagination and filtering options.
      properties:
        pageNumber:
          description: The page number.
          type: integer
          format: int32
          default: 0
          minimum: 0
          example: 0
        pageSize:
          description: The number of items in a single page.
          type: integer
          format: int32
          default: 100
          minimum: 1
          maximum: 100
          example: 100
        category:
          description: The category selections
          type: array
          items:
            type: string
          minItems: 2
          maxItems: 2
          example:
            - CONSENSUS NETWORK MODULES
            - Consensus Cluster A - ECM Organization
        items:
          description: List of item IDs to filter by.
          type: array
          items:
            type: string
          nullable: true
          example:
            - 507f1f77bcf86cd799439011
            - 507f191e810c19729de860ea
        itemFilterType:
          $ref: '#/components/schemas/ItemFilterTypeQuery'
          nullable: true
      required:
        - category
    Sex:
      type: string
      description: Sex
      enum:
        - Female
        - Male
    CorrelationResult:
      type: object
      description: Correlation result
      properties:
        correlation:
          type: number
          description: Correlation value
        adj_p_val:
          type: number
          description: Adjusted p-value
      required:
        - correlation
        - adj_p_val
    DiseaseCorrelation:
      type: object
      description: Disease Correlation
      properties:
        _id:
          type: string
          description: Unique identifier for the disease correlation object
        name:
          type: string
          description: Model name
        matched_control:
          type: string
          description: Matched control for the model
        model_type:
          type: string
          description: Type of model
        modified_genes:
          type: array
          items:
            type: string
          description: List of modified genes
        cluster:
          type: string
          description: Cluster information
        age:
          type: string
          description: Age of the model
        sex:
          $ref: '#/components/schemas/Sex'
        IFG:
          $ref: '#/components/schemas/CorrelationResult'
        PHG:
          $ref: '#/components/schemas/CorrelationResult'
        TCX:
          $ref: '#/components/schemas/CorrelationResult'
        CBE:
          $ref: '#/components/schemas/CorrelationResult'
        DLPFC:
          $ref: '#/components/schemas/CorrelationResult'
        FP:
          $ref: '#/components/schemas/CorrelationResult'
        STG:
          $ref: '#/components/schemas/CorrelationResult'
      required:
        - _id
        - name
        - matched_control
        - model_type
        - modified_genes
        - cluster
        - age
        - sex
    DiseaseCorrelationsPage:
      type: object
      description: A paginated response containing disease correlation objects and pagination metadata.
      properties:
        diseaseCorrelations:
          type: array
          description: The list of disease correlation objects for the current page
          items:
            $ref: '#/components/schemas/DiseaseCorrelation'
        page:
          $ref: '#/components/schemas/PageMetadata'
      required:
        - diseaseCorrelations
        - page
    SexCohort:
      type: string
      description: Sex Cohort
      enum:
        - Females
        - Females & Males
        - Males
    FoldChangeResult:
      type: object
      description: Fold Change result
      properties:
        log2_fc:
          type: number
          description: Log2 fold change
        adj_p_val:
          type: number
          description: Adjusted p-value
      required:
        - log2_fc
        - adj_p_val
    GeneExpression:
      type: object
      description: Disease Correlation
      properties:
        _id:
          type: string
          description: Unique identifier for the disease correlation object
        ensembl_gene_id:
          type: string
          description: Ensembl Gene ID
        gene_symbol:
          type: string
          description: Gene Symbol
        biodomains:
          type: array
          description: List of biodomains associated with the gene
          items:
            type: string
        name:
          type: string
          description: Model name
        matched_control:
          type: string
          description: Matched control for the model
        model_group:
          type: string
          description: Model group
          nullable: true
        model_type:
          type: string
          description: Type of model
        tissue:
          type: string
          description: Tissue type
        sex:
          $ref: '#/components/schemas/SexCohort'
        4 months:
          $ref: '#/components/schemas/FoldChangeResult'
        12 months:
          $ref: '#/components/schemas/FoldChangeResult'
        18 months:
          $ref: '#/components/schemas/FoldChangeResult'
      required:
        - _id
        - ensembl_gene_id
        - gene_symbol
        - biodomains
        - name
        - matched_control
        - model_group
        - model_type
        - tissue
        - sex
    DataVersion:
      type: object
      description: Synapse data version
      properties:
        data_file:
          type: string
        data_version:
          type: string
      required:
        - data_file
        - data_version
    SearchResult:
      type: object
      description: Search result
      properties:
        id:
          type: string
          description: ID of result
        match_field:
          type: string
          description: Field that matched the query
        match_value:
          type: string
          description: Value that matched the query
      required:
        - id
        - match_field
        - match_value
    GeneticInfo:
      type: object
      description: Genetic information about a model
      properties:
        modified_gene:
          type: string
          description: Name of the modified gene
        ensembl_gene_id:
          type: string
          description: Ensembl gene ID
        allele:
          type: string
          description: Allele symbol
        allele_type:
          type: string
          description: Type of allele
        mgi_allele_id:
          type: number
          description: MGI allele ID
      required:
        - modified_gene
        - ensembl_gene_id
        - allele
        - allele_type
        - mgi_allele_id
    IndividualData:
      type: object
      description: Data for an individual
      properties:
        genotype:
          type: string
          description: Genotype of the individual
        sex:
          $ref: '#/components/schemas/Sex'
        individual_id:
          type: string
          description: Unique identifier for the individual
        value:
          type: number
          description: Value for the individual
      required:
        - genotype
        - sex
        - individual_id
        - value
    ModelData:
      type: object
      description: Data associated with a model
      properties:
        name:
          type: string
          description: Name of the model
        evidence_type:
          type: string
          description: Type of evidence
        tissue:
          type: string
          description: Tissue collected
        age:
          type: string
          description: Age at collection
        units:
          type: string
          description: Units of measurement
        y_axis_max:
          type: number
          description: Maximum value for y-axis in visualizations
        data:
          type: array
          description: Values for each individual
          items:
            $ref: '#/components/schemas/IndividualData'
      required:
        - name
        - evidence_type
        - tissue
        - age
        - units
        - y_axis_max
        - data
    Model:
      type: object
      description: Model details
      properties:
        name:
          type: string
          description: Name of the model
        matched_controls:
          type: array
          description: List of matched controls
          items:
            type: string
        model_type:
          type: string
          description: Type of the model
        contributing_group:
          type: string
          description: Group contributing the model
        study_synid:
          type: string
          description: Synapse ID of the study
        rrid:
          type: string
          description: RRID of the model
        jax_id:
          type: number
          description: JAX ID of the model
        alzforum_id:
          type: string
          description: AlzForum ID of the model
        genotype:
          type: string
          description: Genotype of the model
        aliases:
          type: array
          description: List of aliases for the model
          items:
            type: string
        gene_expression:
          type: string
          description: Link to gene expression comparison tool data
          nullable: true
        disease_correlation:
          type: string
          description: Link to disease correlation comparison tool data
          nullable: true
        spatial_transcriptomics:
          type: string
          description: Deprecated field for link to spatial transcriptomics data
          nullable: true
        genetic_info:
          type: array
          description: Genetic information related to the Model
          items:
            $ref: '#/components/schemas/GeneticInfo'
        biomarkers:
          type: array
          description: List of biomarker data associated with the model
          items:
            $ref: '#/components/schemas/ModelData'
        pathology:
          type: array
          description: List of pathology data associated with the model
          items:
            $ref: '#/components/schemas/ModelData'
      required:
        - name
        - matched_controls
        - model_type
        - contributing_group
        - study_synid
        - rrid
        - jax_id
        - alzforum_id
        - genotype
        - aliases
        - gene_expression
        - disease_correlation
        - spatial_transcriptomics
        - genetic_info
        - biomarkers
        - pathology
    ComparisonToolPage:
      type: string
      description: The type of comparison tool page
      enum:
        - Model Overview
        - Gene Expression
        - Disease Correlation
      example: Gene Expression
    ComparisonToolConfigColumn:
      type: object
      properties:
        name:
          type: string
          description: The display name of the column.
        type:
          type: string
          enum:
            - text
            - heat_map
            - link_internal
            - link_external
            - primary
          description: The data type of the column. Must be 'text', 'heat_map', 'link_internal', 'link_external', or 'primary', where 'primary' is the primary key column that uniquely identifies each record in the table.
        data_key:
          type: string
          description: The key used to retrieve data for this column from the data source.
        tooltip:
          type: string
          description: Tooltip text for the column.
        sort_tooltip:
          type: string
          description: Tooltip text for the column's sort functionality.
        link_text:
          type: string
          description: The default text for a link in this column.
        link_url:
          type: string
          description: The default URL for this column.
        is_exported:
          type: boolean
          description: Indicates whether the column is included in data exports.
        is_hidden:
          type: boolean
          description: Indicates whether the column is shown in the comparison table UI.
      required:
        - type
        - data_key
        - is_exported
        - is_hidden
    ComparisonToolConfigFilter:
      type: object
      description: Comparison Tool Config Filter
      properties:
        name:
          type: string
          description: Name of the filter group
          example: Biological Domain
        data_key:
          type: string
          description: Field to filter on
          example: model_type
        short_name:
          type: string
          description: Short name of the filter group
          example: Biodomain
        values:
          type: array
          description: List of filter values
          items:
            type: string
            example: Apoptosis
      required:
        - name
        - data_key
        - values
    ComparisonToolConfig:
      type: object
      properties:
        page:
          $ref: '#/components/schemas/ComparisonToolPage'
        dropdowns:
          type: array
          description: List of dropdown options
          items:
            type: string
            example: RNA - DIFFERENTIAL EXPRESSION, Tissue - Hippocampus, Sex - Females & Males
        row_count:
          type: string
          description: Relative description of the total number of rows in the data
        columns:
          type: array
          description: List of column definitions
          items:
            $ref: '#/components/schemas/ComparisonToolConfigColumn'
        filters:
          type: array
          description: List of filter configurations
          items:
            $ref: '#/components/schemas/ComparisonToolConfigFilter'
      required:
        - page
        - dropdowns
        - row_count
        - columns
        - filters
  parameters:
    modelOverviewSearchQuery:
      name: modelOverviewSearchQuery
      description: The search query used to find and filter model overviews.
      in: query
      style: deepObject
      explode: true
      schema:
        $ref: '#/components/schemas/ModelOverviewSearchQuery'
    diseaseCorrelationSearchQuery:
      name: diseaseCorrelationSearchQuery
      description: The search query used to find and filter disease correlations.
      in: query
      style: deepObject
      explode: true
      schema:
        $ref: '#/components/schemas/DiseaseCorrelationSearchQuery'
    categoryQuery:
      name: category
      description: An ordered list of categories used to filter the data, where the first value is the category and the second is the subcategory. Pass each value by repeating the 'category' query parameter, e.g. ?category=category1&category=subcategoryA.
      in: query
      style: form
      explode: true
      required: true
      schema:
        type: array
        items:
          type: string
    itemQuery:
      name: item
      description: A list of items to filter the data by.
      in: query
      required: false
      schema:
        type: array
        items:
          type: string
      style: form
      explode: true
    itemFilterTypeQuery:
      name: itemFilterType
      description: The type of filter to apply to the items. Possible values are 'include' or 'exclude'.
      in: query
      required: false
      schema:
        $ref: '#/components/schemas/ItemFilterTypeQuery'
  responses:
    BadRequest:
      description: Invalid request
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/BasicError'
    NotFound:
      description: The specified resource was not found
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/BasicError'
    InternalServerError:
      description: The request cannot be fulfilled due to an unexpected server error
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/BasicError'
x-tagGroups:
  - name: Model-AD API Next
    tags:
      - Model Overview
      - Disease Correlation
      - Gene Expression
  - name: Model-AD API
    tags:
      - Data Version
      - Model
      - Comparison Tool Config
