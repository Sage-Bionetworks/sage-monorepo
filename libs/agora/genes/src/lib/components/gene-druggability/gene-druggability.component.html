<p-accordion
  *ngIf="_gene"
  class="gd-accordion"
  [multiple]="true"
  [expandIcon]="'pi pi-fw pi-plus'"
  [collapseIcon]="'pi pi-fw pi-minus'"
  (onOpen)="resetBucket($event)"
>
  <p-accordionTab>
    <p-header>
      <div class="row">
        <div class="col-md-3 col-sm-7 header-title">Small Molecule Modality</div>
        <div class="col-sm-4 col-md-3 header-score text-center">
          <div
            [ngStyle]="getBucketIconStyle(false)"
            [style.background-color]="getBucketBGColor(druggability.sm_druggability_bucket, 'sm')"
            [style.color]="getBucketTextColor(druggability.sm_druggability_bucket, 'sm')"
          >
            <div class="icon-description">
              {{ getBucketNumberText(druggability.sm_druggability_bucket) }}
            </div>
          </div>
        </div>
        <div class="col-sm-12 col-md-6 header-description">
          {{ druggability.classification }}
        </div>
      </div>
    </p-header>

    <p class="gd-accordion-content-heading">Small Molecule Modality Scale</p>
    <p class="gd-accordion-content-description">
      Choose a bucket to display criteria for each level of the Small Molecule Modality Scale
    </p>

    <div class="row inner-row bucket-inner-row">
      <div class="col-md-1 col-sm-2 content-title vertical-auto">Bucket</div>
      <div class="col-md-11 col-sm-10 vertical-auto">
        <div class="icon-wrapper" *ngFor="let bucket of bucketsSM">
          <div class="icon-class caret-wrapper">
            <div
              *ngIf="bucket === currentBucketSM"
              class="custom-caret-down"
              [style.border-top]="getIconStyle(bucket, 'sm')"
            ></div>
          </div>
          <div
            [ngStyle]="getBucketIconStyle(bucket === currentBucketSM)"
            [style.background-color]="getBucketBGColor(bucket, 'sm')"
            [style.color]="getBucketTextColor(bucket, 'sm')"
            (click)="setCurrentBucket(bucket, 'sm')"
          >
            <div class="icon-description">{{ bucket }}</div>
          </div>
          <div
            class="icon-class"
            [style.margin-top]="getClassTextMargin(bucket === currentBucketSM)"
          >
            {{ getClassText(bucket) }}
          </div>
        </div>
      </div>
    </div>

    <div class="row inner-row">
      <div class="col-md-1 col-sm-2 content-title">Criteria</div>
      <div class="col-md-10 col-sm-9 class-description-title">
        <div
          class="no-gutters class-description container"
          [style.background-color]="getBucketBGColor(currentBucketSM, 'sm')"
        >
          <div class="row criteria-row">
            <span
              class="criteria-title full-width"
              [style.color]="getBucketTextColor(currentBucketSM, 'sm')"
              >{{ getDruggabilitySMTitle(currentBucketSM) }}</span
            >
          </div>
          <div class="row criteria-row">
            <span
              class="criteria-description full-width"
              [style.color]="getBucketTextColor(currentBucketSM, 'sm')"
              >{{ getDruggabilitySMText(currentBucketSM) }}</span
            >
          </div>
        </div>
      </div>
      <div class="col-md-6 col-sm-3 d-none d-sm-block"></div>
    </div>
  </p-accordionTab>

  <p-accordionTab>
    <p-header>
      <div class="row">
        <div class="col-md-3 col-sm-8 header-title">Antibody Modality</div>
        <div class="col-md-3 col-sm-4 header-score text-center">
          <div
            [ngStyle]="getBucketIconStyle(false)"
            [style.background-color]="getBucketBGColor(druggability.abability_bucket, 'ab')"
            [style.color]="getBucketTextColor(druggability.abability_bucket, 'ab')"
          >
            <div class="icon-description">
              {{ getBucketNumberText(druggability.abability_bucket) }}
            </div>
          </div>
        </div>
        <div class="col-md-6 col-sm-12 header-description">
          {{ druggability.abability_bucket_definition }}
        </div>
      </div>
    </p-header>

    <p class="gd-accordion-content-heading">Antibody Modality Scale</p>
    <p class="gd-accordion-content-description">
      Choose a bucket to display criteria for each level of the Antibody Modality Scale
    </p>

    <div class="row inner-row bucket-inner-row">
      <div class="col-md-1 col-sm-2 content-title vertical-auto">Bucket</div>
      <div class="col-md-11 col-sm-10 vertical-auto">
        <div class="icon-wrapper" *ngFor="let bucket of bucketsAB">
          <div class="icon-class caret-wrapper">
            <div
              *ngIf="bucket === currentBucketAB"
              class="custom-caret-down"
              [style.border-top]="getIconStyle(bucket, 'ab')"
            ></div>
          </div>
          <div
            [ngStyle]="getBucketIconStyle(bucket === currentBucketAB)"
            [style.background-color]="getBucketBGColor(bucket, 'ab')"
            [style.color]="getBucketTextColor(bucket, 'ab')"
            (click)="setCurrentBucket(bucket, 'ab')"
          >
            <div class="icon-description">{{ bucket }}</div>
          </div>
          <div class="icon-class"></div>
        </div>
      </div>
    </div>

    <div class="row inner-row">
      <div class="col-md-1 col-sm-2 content-title">Criteria</div>
      <div class="col-md-10 col-sm-9 class-description-title">
        <div
          class="no-gutters class-description container"
          [style.background-color]="getBucketBGColor(currentBucketAB, 'ab')"
        >
          <div class="row criteria-row">
            <span
              class="criteria-title full-width"
              [style.color]="getBucketTextColor(currentBucketAB, 'ab')"
              >{{ getDruggabilityABTitle(currentBucketAB) }}</span
            >
          </div>
          <div class="row criteria-row">
            <span
              class="criteria-description full-width"
              [style.color]="getBucketTextColor(currentBucketAB, 'ab')"
              >{{ getDruggabilityABText(currentBucketAB) }}</span
            >
          </div>
        </div>
      </div>
      <div class="col-md-6 col-sm-3 d-none d-sm-block"></div>
    </div>
  </p-accordionTab>

  <p-accordionTab>
    <p-header>
      <div class="row">
        <div class="col-md-3 col-sm-8 header-title">Safety</div>
        <div class="col-md-3 col-sm-4 header-score text-center">
          <div
            [ngStyle]="getBucketIconStyle(false)"
            [style.background-color]="getBucketBGColor(druggability.safety_bucket, 'sf')"
            [style.color]="getBucketTextColor(druggability.safety_bucket, 'sf')"
          >
            <div class="icon-description">
              {{ getBucketNumberText(druggability.safety_bucket) }}
            </div>
          </div>
        </div>
        <div class="col-md-6 col-sm-12 header-description">
          {{ druggability.safety_bucket_definition }}
        </div>
      </div>
    </p-header>

    <p class="gd-accordion-content-heading">Safety Scale</p>
    <p class="gd-accordion-content-description">
      Choose a bucket to display criteria for each level of the Safety Scale
    </p>

    <div class="row inner-row bucket-inner-row">
      <div class="col-md-1 col-sm-2 content-title vertical-auto">Bucket</div>
      <div class="col-md-11 col-sm-10 vertical-auto">
        <div class="icon-wrapper" *ngFor="let bucket of bucketsSF">
          <div class="icon-class caret-wrapper">
            <div
              *ngIf="bucket === currentBucketSF"
              class="custom-caret-down"
              [style.border-top]="getIconStyle(bucket, 'sf')"
            ></div>
          </div>
          <div
            [ngStyle]="getBucketIconStyle(bucket === currentBucketSF)"
            [style.background-color]="getBucketBGColor(bucket, 'sf')"
            [style.color]="getBucketTextColor(bucket, 'sf')"
            (click)="setCurrentBucket(bucket, 'sf')"
          >
            <div class="icon-description">{{ bucket }}</div>
          </div>
          <div class="icon-class"></div>
        </div>
      </div>
    </div>

    <div class="row inner-row">
      <div class="col-md-1 col-sm-2 content-title">Criteria</div>
      <div class="col-md-10 col-sm-9 class-description-title">
        <div
          class="no-gutters class-description container"
          [style.background-color]="getBucketBGColor(currentBucketSF, 'sf')"
        >
          <div class="row criteria-row">
            <span
              class="criteria-title full-width"
              [style.color]="getBucketTextColor(currentBucketSF, 'sf')"
              >{{ getDruggabilitySFTitle(currentBucketSF) }}</span
            >
          </div>
          <div class="row criteria-row">
            <span
              class="criteria-description full-width"
              [style.color]="getBucketTextColor(currentBucketSF, 'sf')"
              >{{ getDruggabilitySFText(currentBucketSF) }}</span
            >
          </div>
        </div>
      </div>
      <div class="col-md-6 col-sm-3 d-none d-sm-block"></div>
    </div>
  </p-accordionTab>
</p-accordion>
