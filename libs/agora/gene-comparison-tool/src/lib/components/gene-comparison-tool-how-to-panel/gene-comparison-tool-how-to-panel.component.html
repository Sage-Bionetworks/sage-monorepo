<p-dialog
  [header]="panes.length > 0 ? panes[activePane].heading : ''"
  [(visible)]="isActive"
  [modal]="true"
  [draggable]="false"
  [resizable]="false"
  [dismissableMask]="true"
  [closable]="false"
  [style]="{ width: '100%', maxWidth: '580px' }"
  styleClass="gct-how-to-panel"
  (onHide)="onHide()"
>
  <ng-template #header>
    <div class="gct-how-to-panel-header">
      <div class="gct-how-to-panel-header-title">
        {{ panes[activePane].heading }}
      </div>
      <div class="gct-how-to-panel-header-close">
        <button class="gct-how-to-panel-header-close-icon" (click)="close()">
          <agora-svg-icon
            imagePath="/agora-assets/icons/close.svg"
            [width]="16"
            [height]="16"
            altText="close"
          >
          </agora-svg-icon>
        </button>
      </div>
    </div>
  </ng-template>

  <div class="gct-how-to-panel-panes">
    <div
      *ngFor="let pane of panes; index as i"
      class="gct-how-to-panel-pane active"
      [ngClass]="{ active: activePane === i }"
      [innerHtml]="pane.content"
    ></div>
  </div>

  <ng-template #footer>
    <div class="checkbox">
      <p-checkbox [(ngModel)]="willHide" [binary]="true" size="small" inputId="hideHowTo" />
      <label for="hideHowTo">Don't show this again</label>
    </div>
    <div>
      @if (activePane > 0) {
        <p-button
          styleClass="gct-how-to-panel-previous"
          label="Back"
          (click)="previous()"
          [rounded]="true"
          size="small"
          icon="pi pi-angle-left"
          variant="outlined"
        ></p-button>
      }
      @if (activePane !== panes.length - 1) {
        <p-button
          label="Next"
          (click)="next()"
          [rounded]="true"
          size="small"
          icon="pi pi-angle-right"
          iconPos="right"
        ></p-button>
      }
      @if (activePane === panes.length - 1) {
        <p-button
          label="Close"
          (click)="isActive = !isActive"
          [rounded]="true"
          size="small"
        ></p-button>
      }
    </div>
  </ng-template>

  @if (loading) {
    <div class="gct-how-to-panel-loading">
      <agora-loading-icon></agora-loading-icon>
    </div>
  }
</p-dialog>
