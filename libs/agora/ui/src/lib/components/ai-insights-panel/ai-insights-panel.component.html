<p-drawer
  [visible]="visible"
  (visibleChange)="onVisibleChange($event)"
  position="right"
  [modal]="false"
  [showCloseIcon]="showCloseIcon"
  [dismissible]="dismissible"
  [closeOnEscape]="closeOnEscape"
  styleClass="gct-analysis-drawer"
>
  <ng-template pTemplate="header">
    <span class="text-xl font-semibold">AI Image Analysis</span>
  </ng-template>
  <div class="drawer-content">
    <p class="drawer-status-message">{{ message }}</p>
    @if (isCapturing) {
      <div class="drawer-loading">
        <i class="pi pi-spin pi-spinner" style="font-size: 2rem"></i>
      </div>
    }
    @if (isStreaming || streamingResponse) {
      <div class="drawer-response">
        @if (isStreaming && !streamingResponse) {
          <div class="drawer-waiting">Waiting for response...</div>
        }
        <div class="drawer-response-text">{{ streamingResponse }}</div>
        @if (isStreaming && streamingResponse) {
          <span class="drawer-cursor">â–‹</span>
        }
      </div>
    }
  </div>
</p-drawer>
