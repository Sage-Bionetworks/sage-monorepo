<div class="base mat-typography">
  <section id="top">
    <div id="breadcrumbs" class="row">
      <a aria-label="Back to home" href="/home"><mat-icon aria-hidden="true">home</mat-icon></a>
      <mat-icon aria-hidden="true">chevron_right</mat-icon>
      <span>Search</span>
    </div>
    <div id="title" class="row">
      <div class="col col-10">
        <h2>Search the Challenge Registry</h2>
        <!-- TODO: add "Add Challenge" button when service is available -->
      </div>
      <div class="col col-2">
        <div class="stats-group">
          <div class="stat-item">
            <h4>{{ totalChallengesCount }}</h4>
            <p class="mat-caption">total in the registry</p>
          </div>
        </div>
      </div>
    </div>
    <div class="search-field">
      <input aria-label="Search the registry" type="text" placeholder="Search challenges" />
      <i><mat-icon aria-hidden="true">search</mat-icon></i>
    </div>
  </section>
  <section id="bottom" class="row">
    <div class="facets col">
      <p-panel
        header="Challenge Year"
        [toggleable]="true"
        [collapsed]="startYearRangeFilter.collapsed"
      >
        <div *ngFor="let year of startYearRangeFilter.values" class="year-btn-group">
          <p-radioButton
            [inputId]="year.label!"
            [value]="year.value"
            [(ngModel)]="selectedYear"
            (onClick)="onYearChange($event)"
          ></p-radioButton>
          <label [for]="year.label">{{ year.label }}</label>
        </div>
        <div class="col calendar-group" *ngIf="isCustomYear">
          <label for="custombar">mm/yyyy - mm/yyyy</label>
          <p-calendar
            #calendar
            [(ngModel)]="customMonthRange"
            view="month"
            dateFormat="mm/yy"
            selectionMode="range"
            [yearNavigator]="true"
            [readonlyInput]="false"
            inputId="custombar"
            (onSelect)="onCalendarChange()"
            (onInput)="onCalendarChange()"
          ></p-calendar>
        </div>
      </p-panel>
      <p-divider></p-divider>
      <ng-container *ngFor="let checkbox of checkboxfilters">
        <p-panel header="{{ checkbox.label }}" [toggleable]="true" [collapsed]="checkbox.collapsed">
          <challenge-registry-checkbox-filter
            [values]="checkbox.values"
            (checkboxChange)="onCheckboxChange($event, checkbox.queryName)"
            inputId="{{ checkbox.queryName }}"
          ></challenge-registry-checkbox-filter>
        </p-panel>
        <p-divider></p-divider>
      </ng-container>
      <ng-container *ngFor="let dropdown of dropdownfilters; last as isLast">
        <p-panel header="{{ dropdown.label }}" [toggleable]="true" [collapsed]="dropdown.collapsed">
          <challenge-registry-search-dropdown-filter
            [values]="dropdown.values"
            (dropdownChange)="onDropdownChange($event, dropdown.queryName)"
          ></challenge-registry-search-dropdown-filter>
        </p-panel>
        <p-divider *ngIf="!isLast"></p-divider>
      </ng-container>
    </div>
    <div class="main col">
      <h3>Results ({{ searchResultsCount }})</h3>
      <div class="card-group">
        <challenge-registry-challenge-card
          *ngFor="let challenge of challenges"
          [challenge]="challenge"
        >
        </challenge-registry-challenge-card>
      </div>
    </div>
  </section>
</div>

<challenge-registry-footer [version]="appVersion"></challenge-registry-footer>
