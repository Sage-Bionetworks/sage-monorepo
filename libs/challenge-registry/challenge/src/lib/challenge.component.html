<div class="base mat-typography" *ngIf="challenge$ | async as challenge">
  <section id="top" class="row">
    <div class="link" class="row">
      <mat-icon aria-hidden="true" class="link-home">home</mat-icon>
      <mat-icon aria-hidden="true" class="link-home">chevron_right</mat-icon>
      <a routerLink="/challenges">challenges</a>
      <mat-icon aria-hidden="true" class="link-home">chevron_right</mat-icon>
      <span>{{ challenge.name }}</span>
    </div>
    <div class="profile-pic-container">
      <challenge-registry-avatar
        class="profile-pic"
        [avatar]="challengeAvatar"
      ></challenge-registry-avatar>
      <span
        *ngIf="challenge.status"
        [ngClass]="['status', challenge.status ? challenge.status : '']"
        >{{ challenge.status }}</span
      >
    </div>
    <div id="details" class="col">
      <div class="details-top row">
        <h2>
          {{ challenge.displayName }}
        </h2>
        <div class="featured">
          <mat-icon aria-hidden="true">military_tech</mat-icon>
          <span>FEATURED!</span>
        </div>
      </div>
      <p class="username">@{{ challenge.name }}</p>
      <div class="progress-bar">
        <div class="progress-bar-top" *ngIf="remainDays">
          <span>{{ this.remainDays }} days remains</span>
        </div>
        <p-progressBar [value]="progressValue" [showValue]="false"></p-progressBar>
        <div class="progress-bar-bottom">
          <span class="start-date">{{ challenge.startDate }}</span>
          <span class="end-date">{{ challenge.endDate }}</span>
        </div>
      </div>
    </div>
  </section>
  <section id="stats" class="row">
    <div class="col fill-empty"></div>
    <div class="col">
      <challenge-registry-challenge-stats
        [loggedIn]="loggedIn"
      ></challenge-registry-challenge-stats>
    </div>
  </section>
  <section id="bottom" class="row">
    <div class="sidenav col">
      <div class="nav-group">
        <a
          class="nav-item"
          routerLink="."
          [queryParams]="{ tab: 'overview' }"
          [ngClass]="{ 'active-tab': activeTab === tabs['overview'] }"
        >
          Overview
        </a>
        <a
          class="nav-item"
          routerLink="."
          [queryParams]="{ tab: 'details' }"
          [ngClass]="{ 'active-tab': activeTab === tabs['details'] }"
        >
          Challenge Details
        </a>
        <a
          class="nav-item"
          routerLink="."
          [queryParams]="{ tab: 'organizers' }"
          [ngClass]="{ 'active-tab': activeTab === tabs['organizers'] }"
        >
          Organizers
        </a>
        <a
          class="nav-item"
          routerLink="."
          [queryParams]="{ tab: 'sponsors' }"
          [ngClass]="{ 'active-tab': activeTab === tabs['sponsors'] }"
        >
          Sponsors
        </a>
        <a
          class="nav-item"
          routerLink="."
          [queryParams]="{ tab: 'stargazers' }"
          [ngClass]="{ 'active-tab': activeTab === tabs['stargazers'] }"
        >
          Stargazers
        </a>
      </div>
    </div>
    <div class="main col">
      <ng-container [ngSwitch]="activeTab">
        <challenge-registry-challenge-overview
          *ngSwitchCase="tabs['overview']"
          [challenge]="challenge"
        >
        </challenge-registry-challenge-overview>
        <challenge-registry-challenge-details
          *ngSwitchCase="tabs['details']"
          [challenge]="challenge"
        >
        </challenge-registry-challenge-details>
        <challenge-registry-challenge-organizers
          *ngSwitchCase="tabs['organizers']"
          [challenge]="challenge"
        >
        </challenge-registry-challenge-organizers>
        <challenge-registry-challenge-sponsors
          *ngSwitchCase="tabs['sponsors']"
          [challenge]="challenge"
        >
        </challenge-registry-challenge-sponsors>
        <challenge-registry-challenge-stargazers
          *ngSwitchCase="tabs['stargazers']"
          [challenge]="challenge"
        >
        </challenge-registry-challenge-stargazers>
      </ng-container>
    </div>
  </section>
</div>

<challenge-registry-footer [version]="appVersion"></challenge-registry-footer>
