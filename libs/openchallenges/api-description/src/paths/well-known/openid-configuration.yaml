get:
  tags:
    - OAuth2
  summary: OAuth2 Authorization Server Metadata
  description: |
    RFC 8414 OAuth2 Authorization Server Metadata endpoint.
    Returns the OAuth2/OIDC discovery document with server configuration.
  operationId: oauth2WellKnownOpenidConfiguration
  x-audience: [public]
  responses:
    '200':
      description: OAuth2 Authorization Server Metadata
      content:
        application/json:
          schema:
            type: object
            properties:
              issuer:
                type: string
                format: uri
                description: Authorization server's issuer identifier
                example: 'https://api.openchallenges.io'
              authorization_endpoint:
                type: string
                format: uri
                description: Authorization endpoint URL
                example: 'https://api.openchallenges.io/oauth2/authorize'
              token_endpoint:
                type: string
                format: uri
                description: Token endpoint URL
                example: 'https://api.openchallenges.io/oauth2/token'
              userinfo_endpoint:
                type: string
                format: uri
                description: UserInfo endpoint URL
                example: 'https://api.openchallenges.io/oauth2/userinfo'
              jwks_uri:
                type: string
                format: uri
                description: JSON Web Key Set document URL
                example: 'https://api.openchallenges.io/.well-known/jwks.json'
              scopes_supported:
                type: array
                items:
                  type: string
                description: Supported OAuth2 scopes
                example: ['openid', 'profile', 'email', 'user:profile', 'read:org', 'write:org']
              response_types_supported:
                type: array
                items:
                  type: string
                description: Supported OAuth2 response types
                example: ['code', 'token', 'id_token']
              grant_types_supported:
                type: array
                items:
                  type: string
                description: Supported OAuth2 grant types
                example: ['authorization_code', 'refresh_token', 'client_credentials']
              subject_types_supported:
                type: array
                items:
                  type: string
                description: Supported subject identifier types
                example: ['public']
              id_token_signing_alg_values_supported:
                type: array
                items:
                  type: string
                description: Supported ID token signing algorithms
                example: ['RS256', 'HS256']
              revocation_endpoint:
                type: string
                format: uri
                description: Token revocation endpoint URL
                example: 'https://api.openchallenges.io/oauth2/revoke'
              introspection_endpoint:
                type: string
                format: uri
                description: Token introspection endpoint URL
                example: 'https://api.openchallenges.io/oauth2/introspect'
              code_challenge_methods_supported:
                type: array
                items:
                  type: string
                description: Supported PKCE code challenge methods
                example: ['S256', 'plain']
              token_endpoint_auth_methods_supported:
                type: array
                items:
                  type: string
                description: Supported client authentication methods at token endpoint
                example: ['client_secret_basic', 'client_secret_post']
            required:
              - issuer
              - authorization_endpoint
              - token_endpoint
              - response_types_supported
              - subject_types_supported
              - id_token_signing_alg_values_supported
    '404':
      description: Configuration not found
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
                example: 'configuration_not_found'
              error_description:
                type: string
                example: 'OAuth2 configuration is not available'
    '500':
      $ref: ../../components/responses/InternalServerError.yaml
