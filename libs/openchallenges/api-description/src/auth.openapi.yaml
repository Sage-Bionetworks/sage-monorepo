openapi: 3.0.3
info:
  version: 1.0.0
  title: OpenChallenges Auth API
  description: |
    Authentication and authorization service for OpenChallenges.

    This service provides:
    - JWT-based user authentication via username/password
    - API key management for service-to-service communication
    - Role-based access control with defined scopes
    - Token validation for accessing protected resources

    **Authentication Methods**:
    - `/v1/auth/login` - Username/password authentication returning JWT tokens
    - `/v1/auth/api-keys` - API key management for programmatic access
    - `/v1/auth/validate` - Token validation for protected resources

    **Authorization Scopes**:
    API access is controlled through role-based permissions and scopes defined below.
  license:
    name: Apache 2.0
    url: https://github.com/Sage-Bionetworks/sage-monorepo/blob/main/LICENSE.txt
  contact:
    name: Support
    url: https://github.com/Sage-Bionetworks/sage-monorepo
  x-logo:
    url: https://dev.openchallenges.io/img/unsafe/logo/OpenChallenges-logo.png
servers:
  - url: http://localhost
    description: Local/dev base
tags:
  - name: Authentication
    description: Operations for user authentication and token management
    x-audience: [public]
  - name: API Key
    description: Operations for API key management and service-to-service authentication
    x-audience: [public]
paths:
  /v1/auth/login:
    $ref: paths/auth/login.yaml
  /v1/auth/logout:
    $ref: paths/auth/logout.yaml
  /v1/auth/profile:
    $ref: paths/auth/profile.yaml
  /v1/auth/api-keys:
    $ref: paths/auth/api-keys.yaml
  /v1/auth/api-keys/{keyId}:
    $ref: paths/auth/api-keys/{keyId}.yaml
  /v1/auth/validate:
    $ref: paths/auth/validate.yaml
components:
  securitySchemes:
    # JWT Bearer for user authentication
    jwtBearerAuth:
      $ref: components/securitySchemes/JwtBearerAuth.yaml

    # API Key for service-to-service communication
    apiBearerAuth:
      $ref: components/securitySchemes/ApiBearerAuth.yaml
