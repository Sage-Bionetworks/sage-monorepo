<div #root [class]="`search ${hasThickBorder() && 'search-thick-border'} `">
  <div class="search-bar">
    <div class="search-bar-icon">
      @if (isLoading) {
        <fa-icon [icon]="faSpinner" animation="spin" data-testid="spinner" />
      } @else {
        @if (!!searchIconPath()) {
          <explorers-svg-icon
            [imagePath]="searchIconPath()!"
            [altText]="searchIconAltText()"
            [width]="45"
            [height]="45"
          />
        } @else {
          <fa-icon [icon]="faMagnifyingGlass" />
        }
      }
    </div>
    <input
      #input
      [placeholder]="searchPlaceholder()"
      autocomplete="off"
      type="text"
      (focus)="onFocus()"
      [(ngModel)]="query"
    />
    @if (query) {
      <div class="search-bar-close">
        <button (click)="clearInput()">
          <fa-icon [icon]="faXmark" />
        </button>
      </div>
    }
  </div>

  @if (showResults && (error || results.length > 0)) {
    <div class="search-results">
      <div class="search-results-inner">
        @if (error) {
          <ul class="search-errors">
            <li>
              <svg width="22" height="22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  opacity=".3"
                  d="M11 3.667A7.331 7.331 0 0 0 3.667 11 7.331 7.331 0 0 0 11 18.333 7.331 7.331 0 0 0 18.334 11 7.331 7.331 0 0 0 11 3.667Zm.917 11.916h-1.833V13.75h1.833v1.833Zm0-3.666h-1.833v-5.5h1.833v5.5Z"
                  fill="#CC9F00"
                />
                <path
                  d="M10.99 1.833C5.93 1.833 1.834 5.94 1.834 11s4.098 9.167 9.158 9.167c5.069 0 9.175-4.107 9.175-9.167s-4.106-9.167-9.175-9.167Zm.01 16.5A7.331 7.331 0 0 1 3.666 11 7.331 7.331 0 0 1 11 3.667 7.331 7.331 0 0 1 18.333 11 7.331 7.331 0 0 1 11 18.333Zm-.917-4.583h1.833v1.833h-1.833V13.75Zm0-7.333h1.833v5.5h-1.833v-5.5Z"
                  fill="#CC9F00"
                />
              </svg>
              {{ error }}
            </li>
          </ul>
        }

        @if (!error && results.length) {
          <ul class="search-results-list">
            <li *ngFor="let result of results" (click)="goToResult(result.id)">
              <span class="result-name">
                {{ result.id || result.name }}
              </span>
              @if (hasAlias(result)) {
                <span class="result-aliases">
                  &nbsp;(Also known as&nbsp;{{ query.toUpperCase() }})
                </span>
              }
            </li>
          </ul>
        }
      </div>
    </div>
  }
</div>
