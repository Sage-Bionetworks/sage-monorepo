<div class="comparison-tool-table" #table>
  <div class="table-header-and-pinned" #tableHeaderAndPinned>
    <explorers-comparison-tool-columns [columnWidth]="columnWidth" />

    @if (pinnedResultsCount() > 0) {
      <div class="table-divider table-divider-1">
        <div class="table-divider-inner">
          <div id="pinned-genes-header">
            <span> Pinned Items ({{ pinnedResultsCount() }}/{{ maxPinnedItems() }}) </span>
          </div>
          <div class="pinned-items-controls">
            <explorers-download-dom-image
              [target]="tableHeaderAndPinned"
              [filename]="getPinnedDataFilename()"
              [hasCsvDownload]="true"
              [hasImageDownload]="viewConfig().allowPinnedImageDownload"
              [data]="getPinnedDataForCsv()"
              [buttonLabel]="'Download'"
              [heading]="'Download all results as:'"
            />
            <button (click)="clearAllPinned()" class="clear-all-button">Clear All</button>
          </div>
        </div>
      </div>
    }
    <explorers-base-table
      [data]="pinnedData()"
      [shouldPaginate]="false"
      [shouldShowNoDataMessage]="false"
      [columnWidth]="columnWidth"
    />
  </div>

  @if (searchTerm() || hasSelectedFilters()) {
    <div class="table-divider">
      <div class="table-divider-inner">
        <div>{{`${searchTerm() ? 'Matching' : 'Filtered'} Results`}}</div>
        @if (unpinnedData().length) {
          <div>
            <button
              class="pin-all-button"
              [disabled]="hasMaxPinnedItems()"
              (click)="pinAll()"
              [pTooltip]="
                hasMaxPinnedItems() ? disabledPinTooltip() : 'Pin all matching rows to the top.'
              "
              tooltipPosition="left"
            >
              <explorers-svg-icon imagePath="/explorers-assets/icons/pin.svg" altText="pin" />
              <span>Pin All</span>
            </button>
          </div>
        }
      </div>
    </div>
  }
  @if (!searchTerm() && !hasSelectedFilters() && pinnedResultsCount() > 0) {
    <div class="table-divider">
      <div class="table-divider-inner">
        <div>All Items</div>
      </div>
    </div>
  }

  <explorers-base-table
    [data]="unpinnedData()"
    [shouldPaginate]="true"
    [shouldShowNoDataMessage]="true"
    [columnWidth]="columnWidth"
  />

  <explorers-heatmap-details-panel />
</div>
